<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<style>
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}
* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>
<title>Staff Animation</title>

</head>
<body>
<h1>Staff Animation</h1>

<p>(Animation de portée)</p>

<p>Cette application permet de faire des animations musicales (écrites), à des fins pédagogiques, pour les insérer dans des screencasts.</p>

<ul>
<li><a href="#l_animation">Animation</a></li>
<li><a href="#le_curseur_de_position">Déplacement du curseur de position</a></li>
<li><a href="#usefull_tools">Outils pratiques</a></li>
<li><a href="#les_notes">Les notes</a></li>
<li><a href="#les_motifs">Les motifs mélodiques</a></li>
<li><a href="#les_chords">Les accords</a></li>
<li><a href="#les_staves">Les portées</a></li>
<li><a href="#les_gammes">Les gammes</a></li>
<li><a href="#les_textes">Les textes</a></li>
<li><a href="#les_images">Les images</a></li>
<li><a href="#les_fleches">Les flèches</a></li>
<li><a href="#set_preferences">Régler toutes les valeurs de l'animation</a></li>
<li><a href="#lannexe">Annexe</a></li>
</ul>


<p><a name="l_animation"></a></p>

<h2>Animation</h2>

<h3>Table des matières</h3>

<ul>
<li><a href="#intro_animation">Introduction</a></li>
<li><a href="#code_composition">Composer le code de l'animation</a>

<ul>
<li><a href="#code_comments">Commentaires dans le code</a></li>
<li><a href="#pause_animation">Faire une pause</a></li>
<li><a href="#move_on_staff">Se déplacer sur la portée</a></li>
<li><a href="#texte_animation">Écrire un texte général</a></li>
<li><a href="#reset_animation">Resetter l'animation</a></li>
<li><a href="#clean_animation">"Nettoyer" l'animation (tout effacer)</a></li>
</ul>
</li>
<li><a href="#vitesse_animation">Vitesse de l'animation</a></li>
<li><a href="#run_animation">Jouer l'animation</a></li>
<li><a href="#run_with_point">Jouer seulement la sélection (bouton “Point”)</a></li>
<li><a href="#creer_captions">Créer des sous-titres ou des doublages</a></li>
<li><a href="#enchainer_animations">Enchainer des animations</a></li>
<li><a href="#mode_flash">Activer/désactiver le Mode “Flash</a></li>
<li><a href="#set_decompte">Définir le décompte de départ</a></li>
<li><a href="#autosave_code">Sauvegarde automatique</a></li>
<li><a href="#reiniti_preferences">Ré-initialiser toutes les valeurs de préférences</a></li>
<li><a href="#set_anim_courante_as_default">Définir l'animation courante comme animation par défaut</a></li>
</ul>


<h3>Réinitialiser les préférences</h3>

<p><a name="intro_animation"></a></p>

<h3>Introduction</h3>

<p>Une animation est composée de <code>pas</code> (step) qui vont être exécutés l'un après l'autre, produisant des choses aussi diverses que&nbsp;:</p>

<ul>
<li>L'apparitioin d'une portée&nbsp;;</li>
<li>L'écriture d'une note ou d'un accord sur la portée&nbsp;;</li>
<li>Le déplacement de notes&nbsp;;</li>
<li>L'écriture de textes explicatifs&nbsp;;</li>
<li>etc.</li>
</ul>


<p>Chaque pas (chaque “step”) exécute une action. Ces pas se définissent dans la console située à gauche de l'écran (le bloc noir). Chaque pas se trouve sur une ligne distincte. Donc chaque ligne est un nouveau pas, une nouvelle étape de l'animation.</p>

<p><strong>Bien noter que chaque ligne représente un pas, il est impossible de définir plusieurs actions sur la même ligne (en réalité c'est faux, mais c'est dangereux ;-)).</strong></p>

<p>Ces pas peuvent&nbsp;:</p>

<ul>
<li>Construire une portée&nbsp;;</li>
<li>Construire une note (et l'afficher)&nbsp;;</li>
<li>Construire un accord&nbsp;;</li>
<li>Construire une gamme&nbsp;;</li>
<li>Écrire un texte associé à un objet (note, portée, barre, etc.)&nbsp;;</li>
<li>Déplacer un objet quelconque (des notes, des textes, etc.)&nbsp;;</li>
<li>Supprimer une note&nbsp;;</li>
<li>Mettre une note en exergue (entourée d'un cercle de couleur)&nbsp;;</li>
<li>etc.</li>
</ul>


<p><a name="code_composition"></a></p>

<h3>Composer le code de l'animation</h3>

<p><a name="code_comments"></a></p>

<h4>Écrire un commentaire</h4>

<p>Les commentaires s'écrivent avec <code>#</code> en début de ligne.</p>

<p>Noter que les commentaires ne peuvent pas se trouver sur un pas proprement, même après le code. Il faut absolument qu'ils soient sur une ligne seule, qui sera passée.</p>

<p><a name="pause_animation"></a></p>

<h4>Faire une pause dans l'animation.</h4>

<p>On utilise la méthode <code>WAIT</code> pour faire une pause, avec en argument le nombre de secondes (qui peut être un flottant, pour des temps très courts)&nbsp;:</p>

<pre><code>WAIT(&lt;nombre de secondes&gt;)
</code></pre>

<p>Par exemple, pour attendre 4 secondes&nbsp;:</p>

<pre><code>maNote=NOTE(a3)
WAIT(4)                 // 4 secondes avant de construire l'accord
monAccord('c3 eb3 g3')
</code></pre>

<p><em>Note&nbsp;: C'est un “pas” comme les autres, donc il doit être mis sur une ligne seule comme toute étape.</em></p>

<p><a name="move_on_staff"></a></p>

<h4>Se déplacer sur la portée</h4>

<p>Pour tous les déplacements sur la portée, voir <a href="#le_curseur_de_position">Déplacement du curseur de position</a></p>

<p><a name="texte_animation"></a></p>

<h4>Écrire un texte général</h4>

<p>Pour écrire un texte en rapport avec l'animation (en haut à gauche), on utilise la méthode <code>WRITE</code>&nbsp;:</p>

<p>WRITE(<le texte à écrire>)</p>

<p>  Par exemple&nbsp;:</p>

<p>  WRITE("Ce qu'il faut remarquer à ce moment-là.")</p>

<p><em>Noter que les objets tels que les notes ont également leur propre méthode textuelle, qui permet d'aligner le textes directement à ces notes, accords, etc.</em></p>

<p><a name="reset_animation"></a></p>

<h4>Reset(-ter) l'animation</h4>

<p>La commande <code>RESET</code> (sans parenthèses ni arguments) permet de repartir de rien en cours d'animation, c'est-à-dire&nbsp;:</p>

<ul>
<li>Effacer tous les objets SAUF les portées et les clés&nbsp;;</li>
<li>Remettre le "curseur" tout à gauche (endroit où seront donc affichés les nouveaux objets).</li>
<li>Remettre toutes les valeurs par défaut.</li>
</ul>


<p>Usage&nbsp;:</p>

<pre><code>RESET
</code></pre>

<p><em>Voir aussi la commande <code>CLEAR</code> ci-dessous qui permet la même chose mais de façon plus ciblée.</em></p>

<p><a name="clean_animation"></a></p>

<h4>Nettoyer l'animation</h4>

<p>“Nettoyer l'animation” signifie supprimer tous les éléments affiché. On peut ou non demander que les portées restent en place, though.</p>

<p>Le pas à utiliser est :</p>

<pre><code>CLEAR(&lt;avec les portées&gt;)
</code></pre>

<p>… <code>&lt;avec les portées&gt;</code> est FALSE par défaut, donc il faut ajouter <code>true</code> pour effacer aussi les portées&nbsp;:</p>

<pre><code>CLEAR(true) // efface aussi les portées
</code></pre>

<p><a name="vitesse_animation"></a></p>

<h3>Vitesse de l'animation</h3>

<p>On peut régler la vitesse de l'animation de façon interactive avec le “slider” se trouvant dans le contrôleur (sous le bouton “Play”).</p>

<p><em>Pour régler la vitesse de façon très fine, cf. aussi <a href="#prefs_speed">Réglage de la vitesse dans les préférences</a>.</em></p>

<p>Mais on peut aussi définir dans le code cette vitesse à l'aide de la commande&nbsp;:</p>

<pre><code>SPEED(&lt;valeur&gt;)
</code></pre>

<p>… avec <code>&lt;valeur&gt;</code> pouvant être un nombre de 0 à 20, <code>10</code> étant la vitesse normale, 0 étant la vitesse la plus lente et 20 la plus rapide.</p>

<p>Pour remettre la vitesse à la vitesse normale&nbsp;:</p>

<pre><code>SPEED() // pas d'argument
</code></pre>

<p><a name="run_animation"></a></p>

<h3>Jouer l'animation</h3>

<p>Pour jouer l'animation, cliquer simplement sur le bouton “Play” ou sur la barre espace.</p>

<p>Si un autre choix que l'animation entière avait été fait, sélectionner l'item «&nbsp;Jouer tout&nbsp;» dans le menu «&nbsp;Animation&nbsp;» ou presser le raccourci clavier CMD+0.</p>

<p><a name="run_only_selection"></a></p>

<h3>Jouer une portion de l'animation</h3>

<p>En composant l'animation, on peut vouloir ne tester qu'une partie de code qu'on est en train de programmer sans avoir à rejouer tout ce qui précède.</p>

<p>Il existe plusieurs moyens de le faire avec “STAVES”&nbsp;:</p>

<ul>
<li>Sélectionner simplement le code à jouer (version rapide, mais non modifiable — cf. <a href="#run_selection_with_selection">Jouer la sélection</a>)&nbsp;;</li>
<li>Jouer l'animation à partir de la position du curseur. Pratique pour les animations longues lorsque l'on code la fin (cf. <a href="#run_from_cursor">Jouer l'animation depuis le curseur</a>)&nbsp;;</li>
<li>Placer des repères pour définir la sélection à jouer. Pratique lorsque le code à modifier ne se trouve pas à la fin (cf. <a href="#run_with_repairs_selection">Jouer une portion par repère</a>)&nbsp;;</li>
</ul>


<p><a name="run_from_cursor"></a></p>

<h4>Jouer l'animation depuis le curseur</h4>

<ol>
<li>Choisir l'item “Jouer depuis curseur” dans le menu «&nbsp;Animation&nbsp;» (ou le raccourci clavier CMD+3)&nbsp;;</li>
<li>Placer le curseur dans la première ligne de code à jouer (inutile ici de le placer en début de ligne, il suffit de le mettre dans la ligne de code par laquelle commencer)&nbsp;;</li>
<li>Presser le bouton Play.</li>
</ol>


<p>Noter cependant une chose importante&nbsp;: si le code à partir du curseur fait référence à des éléments précédemment créés, le jeu de l'animation échouera (elle n'exécute le code qu'à partir du curseur).</p>

<p><a name="run_with_repairs_selection"></a></p>

<h4>Jouer une partie de l'animation entre repères</h4>

<p>Cette méthode est la plus pratique si on compte modifier le code au cours de différents essais et modifications.</p>

<ol>
<li><p>Dans le code, placer <u><strong>au-dessus</strong></u> de la première ligne de code à interpréter (sur une seule ligne ne contenant QUE ce repère)&nbsp;:</p>

<pre><code> #!START
</code></pre></li>
<li><p>Placer <u><strong>en dessous</strong></u> de la dernière ligne à interpréter (sur une seule ligne ne contenant QUE ce repère)&nbsp;:</p>

<pre><code> #!END
</code></pre></li>
<li>Dans le menu «&nbsp;Animation&nbsp;», choisir l'item “Jouer entre #!START et #!END (ou jouer le raccourci CMD + 2)”&nbsp;;</li>
<li>Cliquer sur le bouton “Play”</li>
</ol>


<p><a name="run_selection_with_selection"></a></p>

<h4>Jouer une partie de l'animation par sélection</h4>

<p>Pour ce faire&nbsp;:</p>

<ol>
<li>Sélectionner <u>soigneusement</u> la portion de code à tester (“soigneusement” signifie&nbsp;: en étant sûr de bien placer la sélection du début d'une ligne au début d'une autre ou à la toute fin du code. Cf. la procédure la plus simple ci-dessous)</li>
<li>Choisir l'item “Jouer la sélection” dans le menu «&nbsp;Animation&nbsp;» (ou presser le raccourci CMD+1).</li>
<li>Cliquer sur le bouton “Play”</li>
</ol>


<p>Pour rejouer la même sélection (mais seulement si le code n'a pas été modifié), cliquer à nouveau sur “Play”.</p>

<h4>Méthode pour sélectionner correctement la portion de code</h4>

<p>Le plus simple, pour sélectionner correctement la portion de code à tester, est de procéder comme suit&nbsp;:</p>

<ol>
<li>Placer le curseur au début de la première ligne de code</li>
<li>Relâcher la souris</li>
<li>Faire défiler le code de la console jusqu'à afficher la dernière ligne de code à tester.</li>
<li>Presser la touche Majuscule</li>
<li>Tout en tenant la touche Majuscule, cliquer au bout de la dernière ligne du code à tester.</li>
</ol>


<p><a name="run_with_point"></a></p>

<h3>Jouer seulement la sélection (bouton “Point”)</h3>

<p>Grâce au bouton “Point” (le bouton se trouvant dans le contrôleur à côté du bouton Play), on peut ne jouer que la ligne dans laquelle se trouve le curseur ou les lignes sélectionnées (même si elles ne sont que partiellement sélectionnées).</p>

<p>Noter un point important ici&nbsp;: contrairement à l'option “Jouer seulement la sélection” (menu “Options”) qui va jouer ce qui précède la sélection en mode flash, ie très vite (cf. [Jouer une portion de l'animation][#run_only_selection]), ici, c'est vraiment uniquement la ligne ou les lignes sélectionnées qui seront interprétées.</p>

<p>Cela permet de faire des tests très ponctuels de commandes.</p>

<p><a name="enchainer_animations"></a></p>

<h3>Enchainer des animations</h3>

<p>Le code d'une animation pouvant très vite devenir conséquent, on peut enchainer très facilement des animations. Il suffit pour cela d'utiliser la commande&nbsp;:</p>

<pre><code>SUITE('&lt;nom ou chemin de l'animation&gt;)
</code></pre>

<p>On peut mettre cette commande où l'on veut dans le code, puisqu'elle ne sera interprétée qu'une fois l'animation courante exécutée. Il est donc possible de la mettre au début du code comme à la fin.</p>

<p><a name="mode_flash"></a></p>

<h3>Activer/désactiver le mode “Flash”</h3>

<p>Le mode “Flash” permet de jouer très rapidement une partie de l'animation. C'est utile lorsqu'une partie est calée, mais qu'on ne veut pas la rejouer systématiquement au même rythme pour atteindre la portion en cours d'élaboration.</p>

<p>On peut aussi l'utiliser pour accélérer un ensemble de modifications qui pourraient se faire en même temps.</p>

<p>Pour passer en mode flash&nbsp;:</p>

<pre><code>MODE_FLASH        ou      FLASH
</code></pre>

<p>Pour stopper le mode flash et revenir à la vitesse normale</p>

<pre><code>STOP_MODE_FLASH   ou      STOP_FLASH
</code></pre>

<p>Dans ce cas, on met le code à passer entre&nbsp;:</p>

<pre><code>MODE_FLASH
..............
...  code  ...
...   à    ...
... passer ...
..............
STOP_MODE_FLASH
</code></pre>

<p><em>Noter que le résultat ne sera pas du tout le même que si l'on commentait les lignes de code à passer, puisque l'animation ne se trouverait peut-être pas dans le même état.</em></p>

<p><a name="set_decompte"></a></p>

<h3>Régler le décompte</h3>

<p>Par défaut, l'animation attend deux secondes avant de démarrer.</p>

<p>On peut régler sa valeur par&nbsp;:</p>

<p>DEFAULT('decomte', <nombre de secondes>)</p>

<p><em>Mettre <code>0</code> pour supprimer tout décompte.</em></p>

<p><a name="autosave_code"></a></p>

<h3>Sauvegarde automatique</h3>

<p>En activant le menu “Options > Activer Auto-Save”, tous les modifications apportées au code seront automatiquement enregistrées.</p>

<p><a name="reiniti_preferences"></a></p>

<h3>Ré-initialiser toutes les valeurs de préférence</h3>

<p>Pour remettre toutes les valeurs de décalages aux valeurs de départ, utiliser la commande (SANS PARENTHÈSES)&nbsp;:</p>

<pre><code>RESET_PREFERENCES
</code></pre>

<p><em>Noter que ça ne ré-initialise que les décalages des éléments, tels que les textes de marque de l'harmonie ou des accords, etc. Pour une ré-initialisation complète, utiliser la commande <a href="#reset_animation"><code>RESET</code></a>.</em></p>

<p><a name="set_anim_courante_as_default"></a></p>

<h3>Définir l'animation courante comme animation par défaut</h3>

<p>Pour définir l'animation courante comme l'animation par défaut — ie celle qui s'ouvrira au prochain chargement de l'application&nbsp;—, activer le menu “Fichier > Définir comme anim par défaut”.</p>

<hr />

<p><a name="le_curseur_de_position"></a></p>

<h2>Déplacement du curseur de position</h2>

<p>Le “curseur de position” est la ligne verticale bleue qui traverse verticalement l'animation (invisible quand on la joue) qui indique où seront positionnés les prochains éléments.</p>

<p><em>Noter que ce “curseur de position” n'a rien à voir avec la position courante de l'animation, entendu qu'une animation n'est pas, sauf rare exception, un déplacement continu le long d'une portée. Pour l'explication d'une gamme, par exemple, il peut y avoir un affichage fixe le long duquel on se déplace indifféremment.</em></p>

<h3>Table des matières</h3>

<ul>
<li><a href="#move_cursor_to_right">Déplacement du curseur vers la droite</a></li>
<li><a href="#move_cursor_to_a_pas">Déplacement du curseur sur un “pas”</a></li>
<li><a href="#set_pas_next">Régler la valeur de déplacement entre chaque NEXT()</a></li>
<li><a href="#move_cursor_to_depart">Revenir au début des portées</a></li>
<li><a href="#set_cursor_to_position">Placer le curseur à une position précise</a></li>
</ul>


<p><a name="move_cursor_to_right"></a></p>

<h3>Déplacement du curseur vers la droite</h3>

<p>La commande pour écrire à la suite des dernières notes sur la portée, on utilise la commande&nbsp;:</p>

<pre><code>NEXT([&lt;nombre pixels&gt;])
</code></pre>

<p>Cela déplacera le curseur de position d'une valeur par défaut de 40px. Cette valeur peut être modifiée grâce à <code>DEFAULT('next', &lt;nouveau nombre de pixels&gt;)</code> (cf. <a href="#prefs_set_next">Réglage de l'avancée à chaque NEXT (curseur)</a>).</p>

<p>Par exemple&nbsp;:</p>

<pre><code>NEXT() 
// =&gt; les notes suivantes s'écriront 40px plus à droite
</code></pre>

<p>On peut également effectuer un déplacement précis en indiquant le nombre de pixels en argument.</p>

<pre><code>NEXT([&lt;nombre pixels&gt;])
</code></pre>

<p>Par exemple, pour déplacer le curseur de position de 100px vers la gauche (donc un retour en arrière)&nbsp;:</p>

<pre><code>NEXT(-100)
// =&gt; les notes suivantes s'écriront 100px plus à gauche
</code></pre>

<p><a name="move_cursor_to_a_pas"></a></p>

<h3>Déplacer le curseur sur un pas</h3>

<p>À chaque déplacement (<code>NEXT</code> ou <code>SET_CURSOR</code>), l'animation mémorise la position comme un “pas” (<em>note&nbsp;: si la grille est active, ils sont représentés par des marqueurs tout en haut de l'animation.</em>). Il est très simple de revenir à un de ces “pas”.</p>

<p><strong>Première formule</strong></p>

<pre><code>SET_CURSOR({pas:&lt;indice du pas&gt;})
</code></pre>

<p><strong>Deuxième formule</strong></p>

<pre><code>SET_CURSOR('pas', &lt;indice du pas&gt;)
</code></pre>

<p><strong>Troisième formule</strong></p>

<pre><code>SET_CURSOR(&lt;indice du pas&gt;)
</code></pre>

<p>Noter que dans cette dernière formule, on utilise la même syntaxe que pour placer le curseur de position à une position précise. Mais l'animation par du principe que si son premier argument est un nombre inférieur à 15 (donc qui serait positionné sur une clé de portée), c'est un pas et non pas (sic) une position en pixels. Il y a rarement plus de 15 pas dans une animation traditionnelle.</p>

<p>Dans le cas contraire, s'il n'y avait pas de portée et qu'on voulait vraiment positionner un élément à moins de 15 pixels, on devrait alors utiliser la formule explicite&nbsp;:</p>

<pre><code>SET_CURSOR({offset:&lt;nombre de pixels&gt;})
</code></pre>

<p><a name="set_pas_next"></a></p>

<h3>Régler le pas entre chaque NEXT()</h3>

<p>Cf. <a href="#prefs_set_next">Réglage de la position next</a></p>

<p><a name="move_cursor_to_depart"></a></p>

<h3>Revenir au début des portées (RESET_CURSOR)</h3>

<p>Pour revenir au début des portées, on peut bien entendu utiliser la commande précédente avec un nombre négatif. Si l'on se trouve à la position 500, il suffit d'indiquer&nbsp;:</p>

<pre><code>NEXT(-500)
</code></pre>

<p>… pour se replacer au début.</p>

<p>Mais une commande permet d'effecter ce retour plus simplement, sans connaitre la position courante&nbsp;:</p>

<pre><code>RESET_CURSOR
</code></pre>

<p>Cela remet automatiquement le curseur au début, donc à gauche, en tenant compte des altérations et métriques que peuvent contenir les portées.</p>

<p><em>Pour modifier cette position de début, utiliser la commande <code>DEFAULT('x_start', &lt;nouvelle valeur&gt;)</code> (cf. <a href="#prefs_x_start">Réglage de la position horizontale initiale (curseur)</a>).</em></p>

<p><a name="set_cursor_to_position"></a></p>

<h3>Placer le curseur à une position précise (SET_CURSOR)</h3>

<h4>Par indication de la position exacte</h4>

<p>Pour placer la curseur à une position précise, utiliser la commande&nbsp;:</p>

<pre><code>SET_CURSOR(&lt;position left en pixel&gt;)
</code></pre>

<p>Par exemple, pour se positionner à 100px exactement&nbsp;:</p>

<pre><code>SET_CURSOR(100)
</code></pre>

<p>Les prochains <code>NEXT()</code> partiront de cette nouvelle position.</p>

<h4>Par indication du “pas”</h4>

<p>Chaque fois qu'un <code>NEXT</code> est invoqué, le curseur de position se déplace, créant un nouveau “pas”. On peut utiliser ces pas avec la commande <code>SET_CURSOR</code> en lui fournissant l'indice (1-start) du pas à utiliser&nbsp;:</p>

<pre><code>SET_CURSOR({pas:&lt;indice du pas&gt;})

ou

SET_CURSOR('pas', &lt;indice du pas&gt;)
</code></pre>

<p><em>Note&nbsp;: On peut voir ces pas en affichant la grille, ils sont représentés par des petits rectangles tout en haut de l'animation.</em></p>

<p>Par exemple&nbsp;:</p>

<pre><code>NEXT()
# =&gt; Place le curseur disons à 200. C'est le 1er pas
NEXT()
# =&gt; Place le curseur disons à 250. C'est le 2e pas
NEXT()
# =&gt; Place le curseur à 300. C'est le troisième pas.
SET_CURSOR({pas:1}) ou SET_CURSOR('pas', 1)
# =&gt; Place le curseur au premier pas, donc à 200
</code></pre>

<h4>Par indication du décalage de “pas”</h4>

<p>Au lieu de fournir l'indice du pas comme dans l'utilisation précédente, on peut fournir aussi le décalage de pas par rapport à la position courante.</p>

<pre><code>SET_CURSOR({offset:&lt;nombre de pas du déplacement&gt;})

ou

SET_CURSOR('offset', &lt;nombre de pas du déplacement&gt;)
</code></pre>

<p>Par exemple, pour revenir de deux pas en arrière&nbsp;:</p>

<pre><code>SET_CURSOR({offset:-2})

ou

SET_CURSOR('offset', -2)
</code></pre>

<hr />

<p><a name="usefull_tools"></a></p>

<h2>Outils pratiques</h2>

<h3>Table des matières</h3>

<ul>
<li><a href="#point_repere_grille">Point de repère avec la grille</a></li>
<li><a href="#outil_coordonnees">Outil “Coordonnées”</a></li>
</ul>


<p><a name="point_repere_grille"></a></p>

<h3>Point de repère avec la grille</h3>

<p>Lorsque la grille est active (pour l'activer&nbsp;: “Options > Afficher la grille”), lorsque l'on clique à un endroit de l'animation, un point apparait et les coordonnées de ce points sont donnés en bas de l'écran.</p>

<p><a name="outil_coordonnees"></a></p>

<h3>Outil “Coordonnées”</h3>

<p>Cet outil permet d'obtenir les coordonnées précises à l'écran, pour pouvoir positionner un élément par exemple.</p>

<p>On l'active par le menu “Outil > Activer coordonnées”.</p>

<p>Ensuite, il suffit de déplacer et de re-tailler le rectangle rouge pour obtenir les coordonnées des lignes de fuite bleues.</p>

<p><em>Noter qu'après un redimensionnement du cadre rouge, il est parfois nécessaire de cliquer au centre du cadre pour obtenir les nouvelles coordonnées.</em></p>

<hr />

<p><a name="les_notes"></a></p>

<h2>Les Notes</h2>

<h3>Table des matières</h3>

<ul>
<li><a href="#designation_notes">Désignation des notes</a>

<ul>
<li><a href="#les_alterations">Les altérations</a></li>
</ul>
</li>
<li><a href="#constantes_notes">Constantes notes</a></li>
<li><a href="#creation_note">Créer une note</a></li>
<li><a href="#move_note">Déplacer une note</a></li>
<li><a href="#note_on_staff">Placer une note sur une portée précise</a></li>
<li><a href="#note_exergue_unexergue">Mettre une note en exergue/La sortir de l'exergue</a></li>
<li><a href="#note_fantome">Mettre une note en retrait (note “fantôme”)</a></li>
<li><a href="#entourer_une_note">Entourer une note (exergue plus forte)</a></li>
<li><a href="#forcer_recalage_note">Forcer le recalage d'une note</a></li>
<li><a href="#note_remove">Détruire d'une note</a></li>
</ul>


<p><a name="designation_notes"></a></p>

<h3>Désignation des notes</h3>

<p>Les notes doivent être désignées par :</p>

<pre><code>&lt;nom note&gt;&lt;alteration&gt;&lt;octave&gt;
</code></pre>

<ul>
<li>On désigne le <code>nom des notes</code> par une seule lettre, anglaise, de "a" (la) à "g" (sol).</li>
<li>L'altération est soit rien (note naturelle), soit un signe (cf. ci-dessous "b", "d", "x", ou "t").</li>
<li><p>Vient ensuite l'octave, un nombre, négatif si nécessaire (<em>mais pour le moment, on va seulement jusqu'à l'octave 0, les autres ne sont pas gérés</em>). Noter que l'octave
peut être omis s'il est défini dans les paramètres de la création de la note.
Par exemple&nbsp;:</p>

<pre><code>maNote = NOTE('e', {octave:4})
</code></pre></li>
</ul>


<p><a name="les_alterations"></a></p>

<h4>Marque des altérations</h4>

<p>La valeur <code>&lt;alteration&gt;</code> ci-dessus peut être :</p>

<ul>
<li><code>b</code> pour bémol&nbsp;;</li>
<li><code>t</code> (comme "ton") pour double bémol&nbsp;;</li>
<li><code>d</code> pour dièse&nbsp;;</li>
<li><code>x</code> pour double-dièse&nbsp;;</li>
<li><code>z</code> pour bécarre (comme le Pomme/Ctrl+"Z" qui annule la dernière action, ce "z" annule la dernière altération).</li>
</ul>


<p><a name="constantes_notes"></a></p>

<h3>Constantes notes</h3>

<p>De l'octave 0 (qui n'existe pas en français) à l'octave 7 il existe des constantes pour chaque note avec l'altération bémol ("b") et dièze ("d").</p>

<p>Les deux formules suivantes sont donc possible :</p>

<pre><code>no=NOTE(ad5)
no=NOTE('ad5')
</code></pre>

<p>Note: Attention à ne pas donner à une variable note le nom d'une de ces constantes. Par exemple, si on fait :</p>

<pre><code>a5=NOTE(a5)
</code></pre>

<p>Cela génèrera une erreur de constante déjà définie.</p>

<p>On peut utiliser plutôt&nbsp;:</p>

<pre><code>na5=NOTE(a5)
</code></pre>

<p><a name="creation_note"></a></p>

<h3>Créer une note</h3>

<pre><code>&lt;variable name&gt; = NOTE(&lt;note&gt;)
</code></pre>

<ul>
<li><code>&lt;variable&gt;</code> peut avoir le nom qu'on veut, HORMIS un nom de constante, comme <code>a5</code>.</li>
<li>La <code>&lt;note&gt;</code> peut être soit un string soit une constante (cf. <a href="#designation_notes">Désignation des notes</a>)</li>
</ul>


<p>On peut aussi, si l'on est certain que la note ne sera pas utilisée après (déplacée, supprimée, mise en exergue, etc.) ne pas l'affecter à une variable et composer immédiatement son aspect.</p>

<p>Par exemple, pour placer une note LA 4 avec une marque de cadence et un accord&nbsp;:</p>

<pre><code>NEW_STAFF(SOL)
NOTE(a4).cadence('V I').chord('A Maj')
</code></pre>

<p><a name="move_note"></a></p>

<h3>Déplacer une note</h3>

<p>Pour déplacer une note, on utilise le pas&nbsp;:</p>

<pre><code>&lt;nom variable note&gt;.move(&lt;nouvelle note&gt;[,&lt;params&gt;])
</code></pre>

<p>Exemple&nbsp;:</p>

<pre><code>maNote=NOTE(a4) // crée la note LA 4
maNote.move(g4) // descend la note vers SOL4
</code></pre>

<p><em>Ne mettre aucune espace dans ce code.</em></p>

<p><em>Noter que la note de destination devra vraiment la nouvelle valeur de la note. Si la note "a4" se déplace vers "a3", cette note deviendra "a3" dans ses données.</em></p>

<p><a name="note_on_staff"></a></p>

<h3>Placer une note sur une portée précise</h3>

<p>Si on veut placer une note sur une portée hors de la portée active, on indique l'indice de cette portée avant la note, puis ":"&nbsp;:</p>

<pre><code>&lt;indice portée&gt;:&lt;note&gt;
</code></pre>

<p>Par exemple&nbsp;:</p>

<pre><code>note_autre_staff=NOTE('2:a4')
OU
note_autre_staff=NOTE('2:'+a4)
</code></pre>

<p>… placera un LA4 sur la deuxième portée, même si elle n'est pas active.</p>

<p><em>Noter que cela ne rend pas la portée active.</em></p>

<p><a name="note_exergue_unexergue"></a></p>

<h3>Mettre une note en exergue (ou la retirer de l'exergue)</h3>

<p>Utiliser la méthode <code>exergue()</code> (pour mettre en exergue, en couleur) et <code>unexergue()</code> (pour la sortir de l'exergue).</p>

<p>Exemple&nbsp;:</p>

<pre><code>maNote=NOTE('cx5')
maNote.exergue()   # =&gt; note en couleur (bleu par defaut)
WAIT(4)
maNote.unexergue()  # =&gt; etat normal
</code></pre>

<p>On peut définir la couleur, entre <code>red</code> (rouge) <code>green</code> (vert) ou <code>blue</code> (bleu, par défaut)&nbsp;:</p>

<pre><code>maNote.exergue({color:&lt;couleur&gt;})
</code></pre>

<p>Ou même simplement&nbsp;:</p>

<pre><code>maNote.exergue(green)
</code></pre>

<p>Cf. aussi <a href="#entourer_une_note">Entourer une note</a> ci-dessous.</p>

<p><a name="note_fantome"></a></p>

<h3>Note fantôme</h3>

<p>On peut rendre la note à peine visible (fantôme), en lui appliquant la méthode&nbsp;:</p>

<pre><code>&lt;note&gt;.fantomize()
</code></pre>

<p>Par exemple&nbsp;:</p>

<pre><code>maNote = NOTE('2:c3').fantomize()
</code></pre>

<p>Pour sortir la note de cet état et la remettre visible, utiliser&nbsp;:</p>

<pre><code>&lt;note&gt;.defantomize()
</code></pre>

<p>Par exemple&nbsp;:</p>

<pre><code>maNote = NOTE(c4)
maNote.fantomize()
WAIT(4)
maNote.defantomize()
</code></pre>

<p><a name="entourer_une_note"></a></p>

<h3>Entourer une note</h3>

<p>Pour mettre en exergue une note de façon plus forte que la méthode <a href="#note_exergue_unexergue">exergue</a>, on peut utiliser la méthode <code>surround()</code> qui entoure la note d'un cercle de couleur.</p>

<p>Syntaxe&nbsp;:</p>

<pre><code>&lt;note&gt;.surround([&lt;parameters&gt;])
</code></pre>

<p>… où <code>&lt;note&gt;</code> est une instance de Note, et <code>&lt;parameters&gt;</code> sont les paramètres optionnels envoyés.</p>

<p>Par exemple&nbsp;:</p>

<pre><code>maNote=NOTE(c5)
maNote.surround() # =&gt; entoure d'un cercle rouge

oNote=NOTE(a4)
oNote.surround({color:blue, rectangle:true})
# =&gt; entoure d'un rectangle bleu
</code></pre>

<p>Les paramètres peuvent être&nbsp;:</p>

<dl>
  <dt>color:{String|Constante}</dt>
  <dd>La couleur, parmi 'blue', 'red', 'orange', 'green', 'black' (les valeurs peuvent se définir avec ou sans guillemets).</dd>
  <dt>rectangle:{Boolean}</dt>
  <dd>Si true, un rectangle au lieu d'un rond.</dd>
  <dt>margin:{Number}</dt>
  <dd>Joue sur le diamètre du cercle/rectangle pour laisser plus ou moins de place. Utile lorsque plusieurs notes assez proches sont entourées</dd>
</dl>


<h4>Retirer le cercle</h4>

<p>Deux commandes pour retirer le cercle de la note&nbsp;:</p>

<pre><code>maNote.circle.remove()
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>maNote.unsurround()
</code></pre>

<p><a name="forcer_recalage_note"></a></p>

<h3>Forcer l'actualisation d'une note</h3>

<p>Parfois, il peut survenir qu'une note reste déplacée sur le côté à cause d'une note inférieure conjointe alors que la note inférieure n'est plus là.</p>

<p>Par exemple&nbsp;:</p>

<pre><code>nosi = NOTE(b3)
nodo = NOTE(c4)
# =&gt; c4 sera décalé à droite
nosi.move(b2)
# =&gt; Le si est déplacé mais le do
#    reste décalé à droite
</code></pre>

<p>Dans ce cas (avant que ce bug #49 ne soit corrigé), on peut utiliser la méthode <code>update</code> sur la note pour la remettre bien en place&nbsp;:</p>

<pre><code>...
nosi.move(b2)
nodo.update()
</code></pre>

<p><a name="note_remove"></a></p>

<h3>Détruire une note</h3>

<p>Pour détruire la note (la supprimer de l'affichage, utiliser :</p>

<pre><code>&lt;nom variable note&gt;.remove()
</code></pre>

<hr />

<p><a name="les_motifs"></a></p>

<h2>Les motifs mélodiques</h2>

<p>Bien entendu, un motif mélodiques (une suite de notes) peut s'écrire avec la commande <code>NOTE</code> (cf. <a href="#les_notes">Les notes</a>). Mais il peut être plus rapide d'utiliser plutôt la commande <code>MOTIF</code> qui crée rapidement un motif mélodique et permet de le manipuler comme un ensemble.</p>

<h3>Table des matières</h3>

<ul>
<li><a href="#creer_un_motif">Créer un motif</a></li>
<li><a href="#parametres_motif">Liste des paramètres optionnels</a></li>
<li><a href="#set_hoffset_notes_motif">Régler la distance entre les notes</a></li>
<li><a href="#regler_vitesse_affichage_motif">Modifier la vitesse d'affichage du motif</a></li>
</ul>


<p><a name="creer_un_motif"></a></p>

<h3>Créer un motif</h3>

<p>monMotif = MOTIF('<suite de notes>'[, <parametres optionnels>])</p>

<p>Par exemple&nbsp;:</p>

<p>unMotif = MOTIF('c4 c c d e d c5 e d d c')</p>

<p><em>Noter que dans un motif, l'octave n'a besoin d'être stipulé avec la note que s'il est différent de l'octave de la note précédente. Par défaut (si aucune note ne possède de définition d'octave), c'est l'octave 4 qui est choisi.</em></p>

<p><a name="parametres_motif"></a></p>

<h3>Paramètres optionnels</h3>

<dl>
  <dt>staff</dt>
  <dd>La portée à laquelle sera associée le motif. Noter que l'appartenance des notes est indépendante de cette valeur&nbsp;; si le motif est long et que l'animation doit passer à une portée suivante, les notes suivantes seront associées à cette portée. De la même manière, une note définie par `<indice portée>:<note>` sera associée à la portée correspondante (indice portée).</dd>
  <dt>speed</dt>
  <dd>Vitesse d'affichage du motif au cours de l'animation (cf. <a href="#regler_vitesse_affichage_motif">Régler la vitesse d'affichage du motif</a>).</dd>
  <dt>offset_x</dt>
  <dd>Définition de la distance horizontale entre les notes (cf. <a href="#set_hoffset_notes_motif">Régler la distance entre les notes</a>).</dd>
  
</dl>


<p><a name="set_hoffset_notes_motif"></a></p>

<h3>Régler la distance entre les notes</h3>

<p><a name="regler_vitesse_affichage_motif"></a></p>

<h3>Régler la vitesse d'affichage du motif</h3>

<p>La vitesse d'affichage des notes du motif se règle avec la propriété <code>speed</code> envoyé dans les paramètres optionnelles de la création du motif&nbsp;:</p>

<pre><code>maMelodie = MOTIF('&lt;mes notes&gt;', {speed:&lt;vitesse&gt;})
</code></pre>

<p>Avec <code>&lt;vitesse&gt;</code> qui correspond à peu près au nombre de notes affichées par secondes. Donc une vitesse de <code>1</code> affiche une note par secondes, une vitesse de <code>2</code> affiche 2 notes par seconde et une vitesse de <code>0.5</code> affiche 1 note en 2 secondes.</p>

<hr />

<p><a name="les_chords"></a></p>

<h2>Les Accords</h2>

<h3>Table des matières</h3>

<ul>
<li><a href="#chord_creation">Création d'un accord</a></li>
<li><a href="#chord_ref_note">Référence aux notes de l'accord</a></li>
<li><a href="#write_chord_name">Écrire le nom de l'accord</a></li>
<li><a href="#write_harmony">Écrire l'harmonie</a></li>
<li><a href="#write_cadence">Écrire une cadence</a></li>
<li><a href="#chord_write_modulation">Écrire une modulation</a></li>
<li><a href="#chord_remove">Destruction d'un accord</a></li>
</ul>


<p><a name="chord_creation"></a></p>

<h3>Création d'un accord</h3>

<p>On crée un accord avec :</p>

<pre><code>monAccord=CHORD('&lt;note1&gt; &lt;note2&gt;... &lt;noteN&gt;')
</code></pre>

<p>… où chaque note doit correspondre à la définition normale.</p>

<p>Par exemple&nbsp;:</p>

<pre><code>accDom=CHORD('c3 eb3 g3')
</code></pre>

<h4>Création d'un accord sur plusieurs portées</h4>

<p>On peut poser l'accord sur différentes portées en ajoutant <code>&lt;indice portée&gt;:</code> devant la note (<em>rappel&nbsp;: l'indice portée est "1-start", donc "1" pour la première portée en comptant depuis le haut</em>).</p>

<p>Noter qu'il est inutile d'indiquer l'indice portée de la portée active.</p>

<p>Par exemple (en imaginant que la portée 1 est la portée active)&nbsp;:</p>

<pre><code>acc=CHORD('2:c3 2:g3 e4 g4')
</code></pre>

<p>… placera "c3" et "g3" sur la 2<sup>e</sup> portée (certainement la clé de fa) et les notes "e4" et "g4" sur la 1<sup>ère</sup> portée qui est la portée active.</p>

<p><a name="chord_ref_note"></a></p>

<h3>Référence aux notes de l'accord</h3>

<p>Comme tous les types d'objets possédant plusieurs notes (Accords, Gammes, Motifs), on fait appel aux différentes notes à l'aide de la méthode <code>note</code> appelée sur l'objet :</p>

<pre><code>&lt;nom accord&gt;.note(&lt;indice note&gt;)
</code></pre>

<p>… où <code>&lt;indice note&gt;</code> est l'indice 1-start (1 = première note fournie).</p>

<p>Par exemple&nbsp;:</p>

<pre><code>accDom=CHORD('c3 eb3 g3')
accDom.note(1).move('c4')
// Prends la première note (c3) et la déplace en c4.
</code></pre>

<h4>Opération sur plusieurs notes</h4>

<p>La méthode <code>note</code> de l'objet peut être également appelé avec une liste d'indice de notes. Toutes les notes subiront alors le même traitement.</p>

<p>Par exemple, pour masquer un ensemble de notes&nbsp;:</p>

<pre><code>monAccord = CHORD('b3 d4 f4 a4')
WAIT(1)
monAccord.note([1,2,4]).hide()
# =&gt; masque la 1ère, 2e et 4e note
WAIT(2)
monAccord.note([1,2,4]).show()
# =&gt; ré-affiche les notes
</code></pre>

<h4>Affecter une note à une variable</h4>

<p>Comme pour tout “groupe de notes”, si l'on veut affecter une note de l'accord à une variable (pour l'utiliser plus facilement ensuite), on ne peut pas procéder ainsi&nbsp;:</p>

<pre><code>maNote=monAccord.note(2)      # =&gt; # ERREUR #
maNote.write("Une seconde !") # =&gt; # ERREUR #
</code></pre>

<p>Pour ce faire, il faut impérativement utiliser&nbsp;:</p>

<pre><code>maNote=Anim.Objects.monAccord.note(2)
maNote.write("Une seconde !")
</code></pre>

<p>Donc ajouter <code>Anim.Objects</code> devant <code>monAcccord.note(2)</code>, <code>Anim.Objects</code> étant la propriété qui contient tous les objets de l'animation.</p>

<p>On peut aussi utiliser la méthode pratique <code>objet(...)</code>&nbsp;:</p>

<pre><code>maNote = objet('monAccord.note(2)')
</code></pre>

<p>Mais dans ce cas, noter qu'il faut absolument mettre le paramètre (la référence de l'objet) entre guillemets ou apostrophes.</p>

<p><a name="write_chord_name"></a></p>

<h3>Écrire le nom de l'accord</h3>

<p>Une marque d'accord est un texte. Cf. <a href="#text_chord">Écrire un accord</a>.</p>

<p><a name="write_harmony"></a></p>

<h3>Écrire l'harmonie</h3>

<p>Une marque d'harmonie est un texte. Cf.<a href="#text_harmonie">Écrire l'harmonie</a>.</p>

<p><a name="write_cadence"></a></p>

<h3>Écrire une cadence</h3>

<p>Une cadence est un texte. Cf. <a href="#text_cadence">Écrire une cadence</a>.</p>

<p><a name="chord_write_modulation"></a></p>

<h3>Écrire une modulation</h3>

<p>Une marque de modulation est un texte. Cf. <a href="#text_modulation">Écrire une modulation</a>.</p>

<p><a name="chord_remove"></a></p>

<h3>Destruction d'un accord</h3>

<p>Pour détruire l'accord, utiliser&nbsp;:</p>

<pre><code>&lt;nom variable accord&gt;.remove()
</code></pre>

<hr />

<p><a name="les_staves"></a></p>

<h2>Les portées</h2>

<h3>Table des matières</h3>

<ul>
<li><a href="#create_staff">Créer une portée</a></li>
<li><a href="#active_staff">Activer une portée</a></li>
<li><a href="#recuperer_staff">Récupérer une portée</a></li>
<li><a href="#remove_suplines">Supprimer les lignes supplémentaires</a></li>
<li><a href="#ecrire_texte_portee">Placer un texte sur la portée</a></li>
<li><a href="#remove_staff">Supprimer une portée</a></li>
</ul>


<p><a name="create_staff"></a></p>

<h3>Créer une portée</h3>

<p>Pour créer une portée, utiliser le pas&nbsp;:</p>

<pre><code>NEW_STAFF(&lt;cle&gt;[, &lt;params&gt;])
</code></pre>

<p>… où <code>&lt;cle&gt;</code> peut être <code>SOL</code>, <code>FA</code>, <code>UT3</code>, <code>UT4</code>.</p>

<p>… et <code>&lt;params&gt;</code> peut contenir :</p>

<pre><code>NEW_STAFF(&lt;cle&gt;, {
  offset : decalage supplementaire par rapport à précédente (pixels)
})
</code></pre>

<p><em>Noter que par défaut, il y aura toujours un décalage entre deux portées créées, ce <code>offset</code> ne fait qu'aggrandir l'espacement (s'il est positif) ou le rétrécir (s'il est négatif)</em></p>

<p>Par exemple&nbsp;:</p>

<pre><code>NEW_STAFF(SOL)
</code></pre>

<p>… qui affichera une portée en clé de sol en dessous de la dernière portée.</p>

<p><em>Noter que cette portée deviendra la portée active, c'est-à-dire celle où seront placées les objets définis par la suite.</em></p>

<p><a name="active_staff"></a></p>

<h3>Activer une portée</h3>

<p>Activer une portée signifie que tous les pas suivants la viseront. Par exemple, les notes se déposent toujours sur la portée active.</p>

<pre><code>ACTIVE_STAFF(&lt;indice de la portee&gt;)
</code></pre>

<p>… où <code>&lt;indice de la portee&gt;</code> est son rang dans l'affichage, en partant de 1 et du haut. Donc la portée la plus en haut s'active par&nbsp;:</p>

<pre><code>ACTIVE_STAFF(1)
</code></pre>

<p><a name="recuperer_staff"></a></p>

<h3>Récupérer une portée</h3>

<p>On peut récupérer une portée (pour la “travailler” dessus) à l'aide de la commande&nbsp;:</p>

<pre><code>STAFF(&lt;indice 1-start&gt;)
</code></pre>

<p>Par exemple, pour supprimer la deuxième porée construite&nbsp;:</p>

<pre><code>STAFF(2).remove()
</code></pre>

<p>Noter que pour mettre la portée dans une variable, il faut impérativement utiliser&nbsp;:</p>

<p>maPortee=Anim.Objects.STAFF(x)</p>

<p><a name="remove_suplines"></a></p>

<h3>Supprimer des lignes supplémentaires</h3>

<p>Pour le moment, la suppression de lignes supplémentaires n'est pas automatique, afin de laisser toute liberté à la programmation de l'animation.</p>

<p>Utiliser la commande&nbsp;:</p>

<pre><code>STAFF(&lt;indice 1-start&gt;).remove_suplines({
  top     : &lt;indice ou liste d‘indice a supprimer au-dessus&gt;,
  bottom  : &lt;indice ou liste d‘indices a supprimer en dessous&gt;,
  xoffset : &lt;decalage horizontal&gt;
})
</code></pre>

<ul>
<li>N'utiliser que <code>top</code> et <code>bottom</code> au besoin&nbsp;;</li>
<li>Les indices des lignes se comptent À PARTIR DE LA PORTÉE (donc en montant pour <code>top</code> et en descendant pour <code>bottom</code>)&nbsp;;</li>
<li><code>xoffset</code> n'est à préciser que si les lignes à supprimer ne se trouvent pas sur le décalage horizontal courant (suppression arrière, rare).</li>
</ul>


<h4>Autre commande pour supprimer des lignes supplémentaires</h4>

<p>On détruit ces lignes à l'aide de la commande&nbsp;:</p>

<pre><code>REMOVE_SUPLINE(&lt;parameters&gt;)
</code></pre>

<p>Une ligne supplémentaire est caractéristée par&nbsp;:</p>

<ul>
<li>La portée qui la porte&nbsp;;</li>
<li>Son indice à partir de la portée&nbsp;;</li>
<li>Sa position supérieure ou inférieure&nbsp;;</li>
<li>Son décalage à gauche (“frame” de l'animation).</li>
</ul>


<p>Cela détermine les paramètres de <code>&lt;parameters&gt;</code>.</p>

<pre><code>{
  staff: indice 1-start de la portée (depuis le haut),
  bottom: liste d'indices ou indice de la ligne à supprimer en bas,
  top: liste d'indices ou indice de la ligne à supprimer en haut,
  xoffset: décalage gauche (frame)
}
</code></pre>

<p>Toutes les valeurs à part <code>bottom</code> xou <code>top</code> sont optionnelles&nbsp;:</p>

<p>Si <code>staff</code> n'est pas précisé, on prendra la portée active.</p>

<p>Si <code>xoffset</code> n'est pas précisé, on prendra le décalage courant (ce qui représente le cas le plus fréquent, entendu qu'on va rarement supprimer une ligne supplémentaire "en arrière").</p>

<p><em>Note&nbsp;: lors d'un déplacement, une suppression ou tout autre effet qui doit rendre obsolète la ligne supplémentaire, il est préférable de déclencher la suppression des lignes supplémentaires AVANT la commande sur la note. Par exemple, pour un déplacement&nbsp;:</em></p>

<pre><code>note=NOTE(c4) // ajoute une ligne supplément en bas
WAIT(2)
REMOVE_SUPLINE({bottom:1})
note.move(c5)
</code></pre>

<h4>Précision des indices</h4>

<p>Les indices peuvent être une simple valeur numérique&nbsp;:</p>

<pre><code>bottom:1 / top:1
</code></pre>

<p>… ou une liste d'indices</p>

<pre><code>top:[1,2] / bottom:[1,2]
</code></pre>

<p>Noter que ces indices sont "1-start" et se comptent toujours À PARTIR DE LA portée, donc en descendant pour <code>bottom</code> et en montant pour <code>top</code>.</p>

<p>Noter aussi que <code>bottom</code> et <code>top</code> sont complètement indépendants, pour <code>bottom</code> on ne tient compte QUE des lignes supplémentaires inférieures et pour <code>top</code> on ne tient compte QUE des lignes supplémentaires supérieures.</p>

<p><a name="ecrire_texte_portee"></a></p>

<h3>Écrire un texte sur la portée</h3>

<ul>
<li><a href="#ecrire_texte_portee_cursor">Écrire le texte au curseur</a></li>
<li><a href="#decaler_hauteur_texte_staff">Régler l'écart entre texte et portée</a></li>
<li><a href="#decaler_horizontalite_texte">Décaler le texte à droite ou à gauche</a></li>
<li><a href="#set_width_staff_texte">Définir la largeur du texte</a></li>
<li><a href="#set_style_staff_texte">Utiliser un style de texte</a></li>
<li><a href="#set_texte_staff_down">Positionner le texte en dessous de la portée</a></li>
</ul>


<p><a name="ecrire_texte_portee_cursor"></a></p>

<h4>Écrire un texte au curseur</h4>

<p>Pour écrire un texte à la position actuelle du curseur, on utilise la commande&nbsp;:</p>

<pre><code>STAFF(&lt;indice portée&gt;).write("&lt;le texte&gt;"[, &lt;paramètres optionnels&gt;])
</code></pre>

<p>Par défaut, ce texte se place au-dessus de la portée.</p>

<p><a name="decaler_hauteur_texte_staff"></a></p>

<h4>Régler l'écart entre texte et portée</h4>

<p>Pour le régler à partir de maintenant et pour tous les textes de portée qui suivront, utiliser la commande&nbsp;:</p>

<pre><code>DEFAULT('staff_top_text', &lt;nombre de pixels&gt;)
</code></pre>

<p>Pour revenir à la valeur par défaut&nbsp;:</p>

<pre><code>DEFAULT('staff_top_text')
</code></pre>

<p>Pour régler seulement un texte en particulier, l'écrire en défissant la propriété <code>offset_y</code> des paramètres (2e argument). Par exemple&nbsp;:</p>

<pre><code>STAFF(1).write("Mon texte 20 pixels plus haut", {offset_y: 20})
</code></pre>

<p><a name="decaler_horizontalite_texte"></a></p>

<h4>Décale le texte à droite ou à gauche</h4>

<p>Par défaut, le texte s'aligne par le centre à la position courante du curseur. On peut afficher ce décalage à l'aide de la propriété <code>offset_x</code> envoyé aux paramètres optionnels. Par exemple&nbsp;:</p>

<pre><code>STAFF(2).write("Mon texte 30 pixels plus à droite", {offset_x: 30})
</code></pre>

<p>Bien entendu, on peut combiner tous les éléments&nbsp;:</p>

<pre><code>STAFF(2).write("Mon texte modifié", {offset_y:10, offset_x:20, style:'cadre'})
</code></pre>

<p><a name="set_width_staff_texte"></a></p>

<h4>Définir la largeur du texte</h4>

<p>On peut définir la largeur de la boite contenant le texte à l'aide de la propriété <code>width</code>&nbsp;:</p>

<pre><code>STAFF(1).write("Texte à largeur", {width:&lt;nombre de pixels&gt;})
</code></pre>

<p><a name="set_style_staff_texte"></a></p>

<h4>Utiliser un style de texte</h4>

<p>Pour la cohérence de l'affichage, on peut utiliser quelques styles de texte prédéfinis en réglant la propriété <code>style</code> des paramètres optionnels&nbsp;:</p>

<pre><code>STAFF(1).write("Mon texte stylisé", {style:'&lt;style(s) à utiliser&gt;'})
</code></pre>

<p>Si plusieurs styles doivent être combinés, les séparer par des espaces. Par exemple&nbsp;:</p>

<pre><code>STAFF(2).write("Plusieurs styles compatibles", {style:'cadre exergue italic'})
</code></pre>

<p><strong>Liste des styles</strong>&nbsp;:</p>

<pre><code>italic    Place le texte en italique
cadre     Place un cadre autour du texte
exergue   Met le texte en exergue (gras)
</code></pre>

<p><a name="set_texte_staff_down"></a></p>

<h4>Positionner le texte en dessous de la portée</h4>

<p>  DEFAULT('staff_text_up', false)</p>

<p>  Pour le replacer en haut&nbsp;:</p>

<p>  DEFAUT('staff_text_up')</p>

<p><a name="remove_staff"></a></p>

<h3>Supprimer une portée</h3>

<p>Comme pour tout objet de l'animation, on supprime une portée à l'aide de la méthode <code>remove</code>&nbsp;:</p>

<pre><code>NEW_STAFF(SOL)
# =&gt; Crée une premiere portée
STAFF(1).remove()
# =&gt; Détruit la première portée
</code></pre>

<p>Attention cependant à un certain point&nbsp;: chaque fois qu'une portée supérieure est supprimée, l'indice des portées suivante est modifiée, pour tenir compte SEULEMENT des portées de l'animation courante.</p>

<p>Donc, si l'on a deux portées et que l'on veut les détruire les deux, le code suivant produira une erreur&nbsp;:</p>

<pre><code>NEW_STAFF(SOL)
NEW_STAFF(FA)
....
STAFF(1).remove()
STAFF(2).remove()
=&gt; !ERREUR : la première portée ayant été détruite, la portée d'indice `2` n'existe pas !
</code></pre>

<p>Il convient donc écrire&nbsp;:</p>

<pre><code>STAFF(1).remove()
STAFF(1).remove()
</code></pre>

<p>Ou pour la clarté du code&nbsp;:</p>

<pre><code>STAFF(2).remove()
STAFF(1).remove()
# =&gt; OK
</code></pre>

<p>Il en va de même, évidemment pour l'écriture de tout autre élément sur une portée après la suppression de portée supérieures.</p>

<hr />

<p><a name="les_gammes"></a></p>

<h2>Les gammes</h2>

<h3>Table des matières</h3>

<ul>
<li><a href="#introduction_gammes">Introduction</a></li>
<li><a href="#parametres_gammes">Paramètres de définition des gammes</a></li>
<li><a href="#utilisation_notes_gammes">Utilisation des notes de la gammes</a></li>
</ul>


<p><a name="introduction_gammes"></a></p>

<h3>Introduction</h3>

<p>On peut produire en un seul pas une gamme à l'aide de la commande :</p>

<pre><code>&lt;var&gt;=SCALE(&lt;tonalité&gt;[, &lt;paramters&gt;])
</code></pre>

<ul>
<li><code>&lt;var&gt;</code> est un nom de variable quelconque</li>
<li><code>&lt;tonalité&gt;</code> est la tonalité exprimée par une seule lettre (anglaise) de "a" (la) à "g" (sol). On peut ajouter toutes les altérations voulues (cf. <a href="#les_alterations">Les altérations</a>). Noter que par défaut, suivant la portée active, l'animation affiche ses notes à la hauteur où elles produiront le moins de lignes supplémentaires.</li>
<li><code>&lt;parameters&gt;</code> est une liste de paramètres optionnels. Cf. ci-dessous.</li>
</ul>


<p><a name="parametres_gammes"></a></p>

<h3>Paramètres de définition des gammes</h3>

<p>Ils constituent le second argument de la commande <code>SCALE</code>, après la note de la tonalité.</p>

<p>C'est un objet de propriétés&nbsp;:</p>

<pre><code>maGamme=SCALE('a',{
  octave : 2,
  for    : 5,
  etc.
})
</code></pre>

<h4>Liste des propriétés</h4>

<dl>
  <dt>type : {String}</dt>
  <dd>Le type de gamme, parmi : 'MAJ' : Gamme majeure (défaut), 'min_h' : Mineure harmonique, 'min_ma' : MINeure Mélodique Ascendante, 'min_md' : MINeure Mélodique Descendante.
  </dd>
  <dt>octave : {Number}</dt>
  <dd>L'octave à laquelle il faut affiche la gamme. Par défaut, celui qui produira le moins de ligne supplémentaires, donc celui dont le plus grand nombre de notes se trouve *dans* la portée.
  </dd>
  <dt>staff : {Number}</dt>
  <dd>L'indice de la portée sur laquelle il faut écrire la gamme. Par défaut, la portée active.</dd>
  <dt>offset : {Number}</dt>
  <dd>Le décalage horizontal entre chaque note de la gamme.</dd>
  <dt>asc : {Boolean}</dt>
  <dd>Si TRUE (défaut), la gamme sera ascendante, sinon, elle descendra.</dd>
  <dt>speed</dt>
  <dd>La vitesse d'affichage de la gamme. La valeur correspond au nombre de notes qui seront afficher par seconde. Donc utiliser une valeur entre 0.01 et 1 pour afficher moins d'une note par seconde. Par exemple, la valeur `0.5` affichera 1 note toutes les deux secondes.</dd>
  <dt>for : {Number}</dt>
  <dd>Le nombre de notes de la gamme à afficher. Par défaut, 8 pour pouvoir les afficher toutes, de la tonique à la tonique.</dd>
  <dt>from : {Number}</dt>
  <dd>La première note de la gamme de laquelle partir (1-start)</dd>
</dl>


<p><a name="utilisation_notes_gammes"></a></p>

<h3>Utilisation des notes de la gamme</h3>

<p>Comme pour tout “groupe de notes” (accord, motif, etc.) les notes de la gamme peuvent être ensuite traitées séparément grâce à la méthode <code>note</code> appelé sur l'objet (ici appelée sur la gamme)</p>

<p>Soit une gamme&nbsp;:</p>

<pre><code>maGamme=SCALE('d')
</code></pre>

<p>On récupère ses notes par&nbsp;:</p>

<pre><code>maGamme.note(&lt;indice note&gt;)
</code></pre>

<p>Cet <code>indice</code> est “1-start”, c'est-à-dire que la première note porte l'indice 1, la seconde note porte l'indice 2, etc.</p>

<p>Par exemple, si je veux poser un texte sur la deuxième note&nbsp;:</p>

<pre><code>maGamme.note(2).write("Une seconde !")
</code></pre>

<p>Comme pour tout “groupe de notes”, si l'on veut mettre un élément (note) du groupe dans une variable, ce code n'est pas possible&nbsp;:</p>

<pre><code>maNote=maGamme.note(2)
maNote.write("Une seconde !") # =&gt; # ERREUR #
</code></pre>

<p>Pour ce faire, il faut impérativement utiliser&nbsp;:</p>

<pre><code>maNote=Anim.Objects.maGamme.note(2)
maNote.write("Une seconde !")
</code></pre>

<hr />

<p><a name="les_textes"></a></p>

<h2>Les Textes</h2>

<h3>Table des matières</h3>

<ul>
<li><a href="#intro_textes">Introduction aux textes</a></li>
<li><a href="#create_texte">Créer un texte</a>

<ul>
<li><a href="#types_speciaux_texte">Types spéciaux de texte (Accords, harmonie, cadences, etc.)</a></li>
<li><a href="#create_texte_animation">Créer un texte pour l'animation</a></li>
<li><a href="#create_texte_objet">Créer un texte pour un objet</a></li>
<li><a href="#ecrire_texte_portee">Créer un texte pour la portée (section “Portée”)</a></li>
<li><a href="#creer_captions">Créer des sous-titres ou des doublages)</a></li>
</ul>
</li>
<li><a href="#set_position_texte">Définir les positions des textes</a></li>
<li><a href="#supprimer_texte">Supprimer un texte</a>

<ul>
<li><a href="#supprimer_texte_objet">Supprimer le texte d'un objet</a></li>
</ul>
</li>
</ul>


<p><a name="intro_textes"></a></p>

<h3>Introduction</h3>

<p>Les textes peuvent exister pour l'animation en général (ils sont alors écrits en haut à gauche et chaque nouveau texte remplace l'ancien), mais ils peuvent être associés aussi à tout objet de l'animation, note, portée, mesure, barre, etc.</p>

<p><a name="create_texte"></a></p>

<h3>Créer un texte</h3>

<p><a name="types_speciaux_texte"></a></p>

<h4>Types spéciaux de texte</h4>

<p>Par défaut, un texte est "normal", il s'écrit tel qu'il est défini.</p>

<p>Mais il existe des types qui peuvent être définis grâce à la propriété <code>type</code> envoyée en paramètres&nbsp;:</p>

<dl>
  <dt>chord</dt>
  <dd>Le type `chord` permet d'écrire un accord au-dessus de l'élément porteur du texte. Il est stylisé en conséquence. Cf. <a href="#text_chord">Écrire un accord</a>.</dd>
  <dt>harmony</dt>
  <dd>Écrit le texte sous la portée, sous forme d'une marque d'harmonie.<br>Si le texte se finit par un certain nombre de "*" ou de "•", ils sont considérés comme des renversements de l'accord et traités visuellement comme tels. Cf. <a href="#text_harmonie">Écrire l'harmonie</a>.</dd>
  <dt>cadence</dt>
  <dd>Écrit le texte sous la portée, à la position courante, sous forme de marque cadentielle (donc avec des traits "__|" pour marquer la fin de la partie). Cf. <a href="#text_cadence">Écrire une cadence</a>.</dd>
  <dt>modulation</dt>
  <dd>Écrit le texte pour une modulation, au-dessus de la portée et de travers. Cf. <a href="#text_modulation">Écrire une modulation</a>.</dd>
  <dt>part</dt>
  <dd>Pour la marque d'une partie. Cf. <a href="#text_partie">Écrire une marque de partie<a></dd>
</dl>


<p><a name="text_harmonie"></a></p>

<h3>Écrire l'harmonie</h3>

<p>Pour indiquer une harmonie, par exemple pour indiquer que l'accord est un premier degré sous la forme de son deuxième renversement&nbsp;:</p>

<pre><code>monAccord=CHORD('g4 c5 e5')
monAccord.write("I**",{type:harmony})
</code></pre>

<p>Il existe aussi le raccourci&nbsp;:</p>

<pre><code>monAccord.harmony("I**")
</code></pre>

<p><em>Pour le positionnement de la marque, cf. <a href="#prefs_position_harmony">Position des textes d'harmonie et de cadence</a>.</em></p>

<p><a name="text_cadence"></a></p>

<h3>Écrire une cadence</h3>

<p>Pour indiquer une <strong>CADENCE</strong> avec la méthode <code>write</code>&nbsp;:</p>

<pre><code>monAccord.write("I", {type:cadence, type_cadence:&lt;type de la cadence&gt;})
</code></pre>

<p>Mais cette méthode peut être grandement simplifiée en utilisant la méthode <code>cadence</code>&nbsp;:</p>

<pre><code>monAccord.cadence("I", {type:&lt;type de la cadence&gt;})
</code></pre>

<p><em>Noter qu'ici le <code>type_cadence</code> de la méthode <code>write</code> a été remplacé par <code>type</code>.</em></p>

<p>Les cadences possibles sont&nbsp;:</p>

<pre><code>parfaite        V I
italienne       II|IV|VI V I
imparfaite      I V
plagale         IV I
picarde         V IMaj
demie           II V
rompue          V VI
faureenne       I IV V
</code></pre>

<p>Noter que ce sont des constantes, on peut les utiliser sans guillemets. Par exemple&nbsp;:</p>

<pre><code>monAccord.cadence("I*", {type:imparfaite})
</code></pre>

<p>Pour une explication détaillée des cadences, cf. <a href="http://fr.wikipedia.org/wiki/Cadence_(musique">Page wiki sur les cadences</a>)</p>

<p><em>Pour le positionnement de la marque, cf. <a href="#prefs_position_harmony">Position des textes d'harmonie et de cadence</a>.</em></p>

<h4>Allonger la barre inférieure</h4>

<p>Pour allonger la barre inférieur de la marque d'harmonie, on peut ajouter le paramètre <code>width</code> qui sera le nombre de pixels désiré. Par exemple&nbsp;:</p>

<pre><code>monAccord.write("I**", {type:cadence, width:100})
OU
monAccord.cadence("I**", {width:100})
</code></pre>

<h4>Marque à droite de la barre</h4>

<p>Pour placer une marque à droite de la barre verticale, donc un texte concernant la suite, mettre ce texte entre crochets dans le texte de la cadence&nbsp;:</p>

<p>monAccord.cadence("I* [texte à droite]")</p>

<p><em>Ça peut être par exemple l'index de l'accord dans l'harmonie suivante.</em></p>

<p><a name="text_chord"></a></p>

<h3>Écrire un accord</h3>

<p>Pour indiquer le <strong>NOM DE L'ACCORD</strong> au-dessus des notes (ou d'un autre objet)&nbsp;:</p>

<pre><code>monAccord.write("C", {type:chord})
</code></pre>

<p>… ou le raccourci <code>chord</code>&nbsp;:</p>

<pre><code>monAccord.chord("C")
</code></pre>

<p><em>Pour le positionnement de la marque de l'accord cf. <a href="#prefs_position_chord">Réglage de la position de l'accord</a>.</em></p>

<p><a name="text_modulation"></a></p>

<h3>Écrire une modulation</h3>

<p>Pour écrire une modulation (au-dessus de la portée, nom de l'accord de travers), utiliser&nbsp;:</p>

<pre><code>&lt;objet&gt;.modulation(&lt;nom&gt;[, &lt;parameters&gt;])
</code></pre>

<p>Par exemple&nbsp;:</p>

<pre><code>monAccord = CHORD('c4 d4 fd4 a4')
monAccord.modulation('Sol')
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>monAccord.write('Sol', {type:modulation})
</code></pre>

<p><strong>Texte sous la barre</strong></p>

<p>Le ton de la modulation est indiqué au-dessus de la barre transversal, mais un autre texte peut être écrit SOUS la barre. Pour ce faire, il suffit de le mettre entre crochets dans la définition de la modulation&nbsp;:</p>

<pre><code>monAccord.modulation('Sol [Dom de Dom]')
</code></pre>

<p>… produira quelque chose comme (mais incliné)&nbsp;:</p>

<pre><code>| SOL
|---------
| Dom de Dom
|
|
</code></pre>

<p><em>Pour le positionnement de la marque de modulation cf. <a href="#prefs_position_modulation">Réglage de la position de la marque de modulation</a>.</em></p>

<p><a name="text_partie"></a></p>

<h3>Écrire une marque de partie</h3>

<p>Utiliser la méthode <code>part</code> sur un note, un accord etc. pour placer une marque de partie, avec en premier argument le nom de la partie et en second argument les paramètres optionnels.</p>

<pre><code>&lt;porteur&gt;.part(&lt;nom de partie&gt;[, &lt;parametres&gt;])
</code></pre>

<p>Par exemple&nbsp;:</p>

<pre><code>maMelodie = MOTIF('c3 c3 e3 d3 c3')
maMelodie.note(3).part(coda)
</code></pre>

<p>… écrira la partie “CODA” sur la troisième note de la mélodie.</p>

<p>Autre exemple&nbsp;:</p>

<pre><code>STAFF(1).part(pont,{offset_x:10})
</code></pre>

<p>… écrira la marque de partie “PONT” sur la première portée (<code>STAFF(1)</code>) en la déplaçant de 10px vers la droite par rapport à la position courante du curseur de position.</p>

<h4>Paramètres</h4>

<p>Comme pour la plupart des méthodes, les paramètres se mettent entre crochets. Ces paramètres sont les suivants&nbsp;:</p>

<p>PART("Refrain",{
  offset_x   : décalage horizontal de la marque,
  offset_y   : décalage vertical de la marque,
})</p>

<h4>Constantes partie</h4>

<p>On peut utiliser ces constantes comme premier argument&nbsp;:</p>

<pre><code>  La marque…            … écrira :
  ---------------------------------
  exposition            EXPOSITION
  expo                  EXPO.
  developpement         DÉVELOPPEMENT
  development           DEVELOPMENT
  dev                   DEV.
  pont                  PONT
  coda                  CODA
  themea                THÈME A
  tha                   TH. A
  themeb                THÈME B
  thb                   TH. B
  themec                THÈME C
  thc                   TH. C
  refrain               REFRAIN
  couplet               COUPLET
</code></pre>

<p>Si le nom de la partie n'est pas une constante, il faut la mettre entre guillemets.</p>

<h4>Réglage de la position de la marque de partie</h4>

<p>On peut régler de façon absolue la marque de partie grâce à&nbsp;:</p>

<pre><code>DEFAULT('part_y', &lt;position verticale&gt;)
DEFAULT('part_x', &lt;position horizontale&gt;)
</code></pre>

<p>On peut la définir par rapport au décalage actuel avec&nbsp;:</p>

<pre><code>DEFAULT('offset_part_y', &lt;decalage vertical&gt;)
DEFAULT('offset_part_x', &lt;decalage horizontal&gt;)
</code></pre>

<p>On peut bien entendu, très ponctuellement, ajuster la position de la marque dans les paramètres envoyés à la méthode <code>part</code> (second argument), avec <code>offset_x</code> et <code>offset_y</code>.</p>

<p><em>Comme pour tout décalage vertical, une valeur positive éloigne de la portée tandis qu'une valeur négative rapproche de la portée.</em></p>

<p><a name="create_texte_animation"></a></p>

<h3>Créer un texte pour l'animation</h3>

<p>Utiliser la commande&nbsp;:</p>

<pre><code>WRITE("&lt;le texte&gt;")
</code></pre>

<p><a name="create_texte_objet"></a></p>

<h4>Créer un texte pour un objet</h4>

<p>Pour associer un texte à un objet, il faut bien sûr créer l'objet puis ensuite appeler sa méthode <code>write</code> (écrire)&nbsp;:</p>

<pre><code>maNote=NOTE(a4)
maNote.write("C'est un LA 4")
</code></pre>

<p><a name="creer_captions"></a></p>

<h3>Créer des sous-titres</h3>

<p><em><a href="#commande_caption">La commande <code>CAPTION</code></a>
</em><a href="#use_caption_as_soustitres">Utilisation de sous-titre au lieu de doublage</a>
<em><a href="#caption_omit">Désactiver les doublages en cours d'élaboration de l'animation</a>
</em><a href="#affichage_temporised_doublage">Affichage temporisé du doublage</a>
<em><a href="#desactiver_temporize">Désactiver le doublage temporisé</a>]
</em><a href="#effacer_caption">Effacer le sous-titre ou le doublage</a></p>

<p><a name="commande_caption"></a></p>

<h4>La commande <code>CAPTION</code></h4>

<p>On peut vouloir créer des sous-titres pour deux raisons principales&nbsp;:</p>

<ol>
<li>Afficher des explications en même temps que l'animation joue (vrais sous-titres qui seront lisibles dans l'animation)&nbsp;;</li>
<li>Comme pour un doublage, afficher un texte qui sera lu au cours de l'animation, donc affiché hors animation (qui ne sera pas visible dans l'animation finale).</li>
</ol>


<p>Pour ces deux utilisations, on utilise la commande&nbsp;:</p>

<pre><code>CAPTION(&lt;texte&gt;[, &lt;parameters&gt;])
</code></pre>

<p>Cette commande affiche le texte <code>&lt;texte&gt;</code> à l'écran en respectant les paramètres optionnels <code>&lt;parameters&gt;</code>.</p>

<p><a name="use_caption_as_soustitres"></a></p>

<h4>Utilisation de sous-titres au lieu de doublages</h4>

<p>Par défaut, le texte s'affichera comme un <strong>texte de doublage</strong>, donc hors du cadre de l'animation. Pour utiliser vraiment, PENDANT TOUTE L'ANIMATION, le texte en sous-titre (à l'intérieur de l'animation), alors définir&nbsp;:</p>

<pre><code>DEFAULT('caption', true)
</code></pre>

<p>On peut également définir localement qu'un texte doit être un doublage ou non grâce à la propriété <code>caption</code> dans les paramètres&nbsp;:</p>

<pre><code>CAPTION("Mon doublage", {caption:false})
ou
CAPTION("Mon doublage", {doublage:true})

CAPTION("Mon sous-titre", {caption:true})
</code></pre>

<p>De façon encore plus simple, on peut envoyer un deuxième argument <code>true</code> pour dire que c'est un sous-titre ou <code>false</code> pour dire que c'est un texte de doublage. Mais dans ce cas, bien entendu, aucun autre paramètre ne peut être transmis contrairement aux syntaxes précédentes.</p>

<p>Par exemple&nbsp;:</p>

<pre><code>CAPTION("Mon doublage", false)

CAPTION("Mon sous-titre", true)
</code></pre>

<p><a name="affichage_temporised_doublage"></a></p>

<h4>Affichage temporisé du doublage</h4>

<p>Il est possible, au lieu d'afficher le texte des doublages comme un bloc, de les faire apparaitre petit à petit, au rythme de la parole.</p>

<p>Pour ce faire, ajouter au début de l'animation (ou à l'endroit où devra être activé cette fonctionnalité)&nbsp;:</p>

<pre><code>DEFAULT('caption_timer', true)
</code></pre>

<p>On peut régler le débit de parole avec&nbsp;:</p>

<pre><code>DEFAULT('caption_debit', &lt;valeur&gt;)
</code></pre>

<p>… où <code>&lt;valeur&gt;</code> est 1 par défaut, et le débit augmente à mesure que la valeur augmente et diminue quand la valeur se trouve entre 0 et 1 (p.e. <code>0.5</code> pour aller deux fois moins vite).</p>

<p>Quand le doublage est temporisé, on peut ajouter le paramètres <code>wait</code> au 2e argument de la commande <code>CAPTION</code>, ce qui aura pour effet de ne faire à l'étape suivante que lorsque tout le texte aura été dit.</p>

<pre><code>CAPTION("Mon doublage temporisé", {wait:true})
</code></pre>

<p>Dans le cas contraire, l'animation passera à l'étape suivante tout en écrivant le texte de façon temporisé.</p>

<h4>Affichage temporisé sur étapes suivantes</h4>

<p>Plutôt que d'attendre la fin de l'écriture du doublage, on peut vouloir que l'animation joue certaines étapes sur l'écriture du doublage (donc sur le texte qui sera dit). Mais dans ce cas, si les étapes prennent moins de temps que l'écriture du doublage, et qu'un autre doublage est appelé, le premier doublage sera avorté, coupé avant la fin.</p>

<p>On peut remédier à cela grâce à la commande&nbsp;:</p>

<pre><code>WAIT_CAPTION
</code></pre>

<p>… <em>(qu'on peut obtenir en autocomplétion par <code>waic[TAB]</code>)</em> qui va attendre, après les étapes d'animation, la fin de l'écriture du doublage avant de passer à la suite.</p>

<p>Par exemple&nbsp;:</p>

<pre><code># Il faut que les doublages soient "temporisés"
DEFAULT('caption_timer', true)

# ....
CAPTION("Ceci est un doublage qui sera dit sur les étapes suivantes.")

# Puisque CAPTION ci-dessus ne définit pas le paramètre {wait:true}, les
# étapes suivantes seront jouées pendant que le doublage s'affichera
maGamme = SCALE('c')
maGamme.note([1,3,5]).surround()

# Même si les deux étapes ci-dessus se terminent avant le doublage, on
# attendra ici la fin de l'écriture du doublage avant de de passer à la suite
WAIT_CAPTION
</code></pre>

<p><a name="caption_omit"></a></p>

<h4>Désactivation des doublages en cours d'élaboration de l'animation</h4>

<p>Lorsqu'on est en train de mettre sur pied l'animation, il peut être intéressant de déactiver les doublages lorsqu'ils sont temporisés avec un paramètre <code>wait</code> à <code>true</code> qui fait attendre la fin de l'affichage.</p>

<p>Pour les désactiver, actionner le menu “Options > Omettre les doublages”.</p>

<p>Pour remettre cette fonction en route, actionner le menu devenu “Options > Jouer les doublages”.</p>

<p><a name="desactiver_temporize"></a></p>

<h4>Désactiver le doublage temporisé</h4>

<p>Pour désactiver le double temporisé à un moment de l'animation, écrire à l'endroit où la fonctionnalité doit être désactivée&nbsp;:</p>

<pre><code>DEFAULT('caption_timer', false)
</code></pre>

<p>Noter aussi qu'on peut demander, pour se concentrer sur l'animation, demander à l'application d'omettre les doublages (cf. <a href="#caption_omit">Omettre les doublages</a>)</p>

<p><a name="effacer_caption"></a></p>

<h4>Effacer le sous-titre ou le doublage</h4>

<p>Pour effacer le sous-titre ou le doublage, appeler la méthode sans argument ou utiliser un texte vide en premier argument. Par exemple, pour effacer le sous-titre actif&nbsp;:</p>

<pre><code>CAPTION("", {caption:true})
CAPTION("", true)
</code></pre>

<p>Pour effacer le doublage&nbsp;:</p>

<pre><code>CAPTION()
</code></pre>

<p><a name="set_position_texte"></a></p>

<h3>Définition des position des textes</h3>

<p>On peut définir les positions de façon générale, dans les préférences. Cf. <a href="#set_preferences">Réglage des valeurs par défaut</a>. Par défaut, les réglages sont pensés pour être efficace dans la plupart des situations, mais on peut avoir à les affiner dans les cas spéciaux.</p>

<p>On peut également modifier la position d'un texte en particulier. Pour cela voir&nbsp;:
* <a href="#modify_vertical_position_texte">Modifier la position verticale</a>&nbsp;;
* <a href="#modify_horizontal_position_texte">Modifier la position horizontale</a>)&nbsp;;
* <a href="#modify_staff_of_texte">Modifier la portée du texte</a>.</p>

<p><a name="modify_vertical_position_texte"></a></p>

<h4>Modification de la position verticale</h4>

<p>La position verticale peut se régler avec la propriété <code>offset_y</code> définie dans le second argument des méthodes de texte.</p>

<p>Par exemple&nbsp;:</p>

<pre><code>STAFF(1).write("Mon texte décalé", {offset_y: 50})
</code></pre>

<p>Cela aura pour effet de monter le texte de 50px par rapport à sa position "naturelle".</p>

<p><em>Noter pour tous ces réglages qu'une valeur positive ÉLOIGNE toujours le texte de la portée tandis qu'une valeur négative le RAPPROCHE.</em></p>

<p>Autre exemple pour place plus bas un texte d'harmonie d'un accord&nbsp;:</p>

<pre><code>monAccord = CHORD('2:g3 2:b3 d3 g3')
monAccord.harmony("I", {offset_y:20})
</code></pre>

<p>La marque "I" de l'harmonie sera placé 20 pixels sous sa position naturelle.</p>

<p><a name="modify_horizontal_position_texte"></a></p>

<h4>Modifier la position horizontale</h4>

<p>Définir la propriété <code>offset_x</code> dans les paramètres (2e argument) des méthodes de texte (<code>write</code>, <code>harmony</code>, etc.)</p>

<p>Par exemple pour écrire le texte 100px plus à gauche sur la deuxième portée&nbsp;:</p>

<pre><code>STAFF(2).write("Mon texte décalé", {offset_x:-100})
</code></pre>

<p>Pour placer le texte d'une cadence 20 pixels plus loin (plus à droite)&nbsp;:</p>

<pre><code>monAccord = CHORD('g3 b3 d3')
monAccord.cadence("I", {type:parfaite, offset_x:20})
</code></pre>

<p>Bien entendu, on peut combiner la décalage horizontal et vertical&nbsp;:</p>

<pre><code>monAccord.chord("Cm7", {offset_y:10, offset_x:20})
</code></pre>

<p>… en évitant toutefois de trop modifier localement les valeurs, ce qui donnerait un moins bon aspect à l'animation. Il vaut mieux trouver des réglages généraux qui conviennent à la situation.</p>

<p><a name="modify_staff_of_texte"></a></p>

<h4>Modifier la portée du texte</h4>

<p>Par défaut, la portée du texte est celle de son “possesseur” (l'accord, la note, etc.) ou le cas échéant la portée courante.</p>

<p>On peut néanmoins définir explicitement la portée de référence en définissant la propriété <code>staff</code> dans les paramètres envoyés à la méthode de texte (2e argument), avec en valeur l'indice (à partir de 1 et du haut) de la portée.</p>

<p>Par exemple, imaginons deux portées, avec comme portée active la portée 1, c'est-à-dire celle du haut. Sur cette portée, on écrit un accord, et on veut écrire en dessous la cadence. Mais on aimerait que cette cadence, au lieu d'apparaitre sous la première portée (qui est la portée de l'accord qui porte le texte), devra apparaitre sous la deuxième. Voici le code&nbsp;:</p>

<pre><code>NEW_STAFF(SOL)
NEW_STAFF(FA)
ACTIVE_STAFF(1)
monAccord = CHORD('c4 g4 e4')
monAccord.cadence("I", {staff:2, type:plagale})
</code></pre>

<p><a name="supprimer_texte"></a></p>

<h3>Supprimer un texte</h3>

<p><a name="supprimer_texte_objet"></a></p>

<h4>Supprimer un texte d'objet</h4>

<p>Pour supprimer le texte de l'objet, c'est-à-dire de le faire disparaitre de l'affichage, utiliser la méthode <code>hide</code> (cacher) ou <code>remove</code> du texte de l'objet&nbsp;:</p>

<pre><code>&lt;note&gt;.texte[&lt;type&gt;].hide() / remove()
</code></pre>

<p>Où <code>&lt;type&gt;</code> est le type de texte&nbsp;:</p>

<ul>
<li>'regular' pour un texte normal (sans type)</li>
<li>'chord'   pour un accord</li>
<li>'cadence' pour une cadence</li>
<li>'harmony' pour une harmonie</li>
<li>'modulation' pour une modulation.</li>
</ul>


<p>Par exemple&nbsp;:</p>

<pre><code>maNote=NOTE(a4)
# Écrire le texte
maNote.write("C'est un LA 4")
# Attendre 2 secondes
WAIT(2)
# Supprimer le texte
maNote.texte['regular'].hide()
</code></pre>

<p>Noter que cette méthode supprime l'affichage du texte, mais l'objet <code>texte</code> existe toujours pour l'objet et on peut le ré-utiliser plus tard, par exemple avec&nbsp;:</p>

<pre><code>maNote.texte['regular'].show()
</code></pre>

<p>… qui ré-affichera ce texte.</p>

<p>En revanche, si on utilise&nbsp;:</p>

<pre><code>maNote.texte['regular'].remove()
</code></pre>

<p>… alors l'objet sera vraiment détruit.</p>

<hr />

<p><a name="les_images"></a></p>

<h2>Les images</h2>

<h3>Table des matières</h3>

<ul>
<li><a href="#insertion_image">Ajouter une image</a></li>
<li><a href="#modify_position_image">Modifier la position de l'image</a></li>
<li><a href="#move_image">Déplacer l'image</a></li>
<li><a href="#modify_cadrage_image">Modifier le cadrage de l'image</a></li>
<li><a href="#modify_source_image">Modifier la source de l'image</a></li>
<li><a href="#dont_build_image">Ne pas construire l'image lors de l'instanciation</a></li>
</ul>


<p><a name="insertion_image"></a></p>

<h3>Ajouter une image</h3>

<p>On peut insérer n'importe quelle image dans l'animation, par exemple une partition, grâce à la commande :</p>

<pre><code>IMAGE(&lt;parametres&gt;)
</code></pre>

<p>Par exemple&nbsp;:</p>

<pre><code>monImage = IMAGE({url:'path/to/monimage.png'})
</code></pre>

<p>Les paramètres peuvent être les suivants&nbsp;:</p>

<pre><code>monImg=IMAGE({
  url     : &lt;chemin vers image&gt; ATTRIBUT OBLIGATOIRE
  x       : &lt;position horizontale dans l'animation&gt;
  left    : // comme `x`, utiliser l'un ou l'autre
  y       : &lt;position verticale dans l'animation&gt;
  top     : // comme `y`, utiliser l'un ou l'autre
  width   : &lt;taille de l'image|auto&gt;      ATTRIBUT OBLIGATOIRE 
  height  : &lt;hauteur de l'image|auto&gt;     ATTRIBUT OBLIGATOIRE
  // Propriétés spéciales pour le cadrage, lorsque l'on ne veut pas
  // utiliser toute l'image, mais seulement une portion de l'image
  cadre_width     : &lt;largeur de la portion à prendre dans l'image&gt;
  cadre_height    : &lt;hauteur de la portion à prendre dans l'image&gt;
  inner_x  : &lt;décalage horizontal de la portion d'image&gt;
  inner_y  : &lt;décalage vertical de la portion d'image
})
</code></pre>

<p><em>Note&nbsp;: Toutes les mesures s'expriment en pixels (mais sans 'px', juste le nombre de pixels).</em></p>

<p>Noter que le <code>width</code> et le <code>height</code> sont obligatoires (c'est à moitié vrai, puisque s'ils ne sont pas fournis, c'est la taille de l'image qui est prise en référence). Leur valeur peut être <code>auto</code> et dans ce cas elle est calculée automatiquement par rapport à la valeur qui est fournie.</p>

<p>Pour des informations concernant le “recadrage de l'image”, cf. <a href="#modify_cadrage_image">Modifier le cadrage de l'image</a>.</p>

<p>Noter que l'image est aussitôt construite est insérée dans l'animation avec les paramètres fournis, sauf si <code>build:false</code> est ajouté aux paramètres définissant l'image (cf. <a href="#dont_build_image">Ne pas construire l'image</a>).</p>

<p><a name="modify_position_image"></a></p>

<h3>Modifier la position de l'image</h3>

<p>Pour modifier la position de l'image, il faut jouer sur les paramètres <code>top</code> (haut) et <code>left</code> (gauche) de ses paramètres optionnels. Par exemple&nbsp;:</p>

<pre><code>monImage=IMAGE({url:'path/to/image.png', top:100, left:200})
</code></pre>

<p>… placera l'image 100 pixels plus bas que le haut du cadre de l'animation et à 200 pixels du bord gauche.</p>

<p>Noter qu'il est extrêmement simple de connaitre les coordonnées de l'image&nbsp;: il suffit de la déplacer dans l'animation une fois qu'elle est affichée. Ses coordonnées s'affichent en bas de l'écran. Donc&nbsp;:</p>

<ul>
<li>Définir la commande d'affichage de l'image sans définir <code>top</code> et <code>left</code>&nbsp;;</li>
<li>Faire jouer l'animation jusqu'au moment où l'image s'affiche&nbsp;;</li>
<li>Se mettre en pause&nbsp;;</li>
<li>Déplacer l'image au bon endroit&nbsp;;</li>
<li>Relever les coordonnées qui s'affichent et définir <code>top</code> et <code>left</code> dans les paramètres de la commande IMAGE.</li>
</ul>


<p><a name="move_image"></a></p>

<h3>Déplacer l'image</h3>

<p>Pour déplacer l'image (pas la positionner mais l'animer en la changeant de place), utiliser sa méthode <code>move</code>&nbsp;:</p>

<pre><code>monImage = IMAGE({&lt;parametres de l'image&gt;})
monImage.move({paramètres du déplacement})
</code></pre>

<p>On peut déplacer l'image en déterminant sa position finale à l'aide des paramètres <code>x</code> (position horizontale) et <code>y</code> (position verticale). La valeur est en pixels.</p>

<pre><code>monImage.move({x:300, y:100})
</code></pre>

<p>On peut déplacer l'image en déterminant le nombre de pixels de déplacement horizontal à l'aide de <code>for_x</code> ou vertical à l'aide de <code>for_y</code>&nbsp;:</p>

<pre><code>monImage.move({for_x:10, for_y:100})
</code></pre>

<p>Ou en combinant les deux formules&nbsp;:</p>

<pre><code>monImage.move({x:300, for_y:10})
</code></pre>

<p>On détermine le temps (durée) de déplacement de l'image à l'aide de la propriété <code>duree</code> qui détermine le nombre de secondes que mettra l'image pour atteindre sa nouvelle position (2 secondes par défaut)&nbsp;:</p>

<pre><code>monImage.move({for_x:10, for_y:100, duree:1})
</code></pre>

<p><a name="modify_cadrage_image"></a></p>

<h3>Modifier le cadrage de l'image</h3>

<p>Plutôt que d'insérer tout un tas d'images, par exemple une image par portée de la partition, il est plus intéressant d'importer comme image la partition entière puis ensuite de “zoomer” (ou “cadrer”) sur certaines parties de l'image pour n'en faire apparaitre qu'une partie.</p>

<p>C'est ici que le cadrage entre en jeu.</p>

<p>Pour recadrer ou cadrer une image&nbsp;:</p>

<p>Si l'image est affichée (par exemple en fin d'animation ou après une pause), il suffit de double-cliquer dessus pour l'éditer (<em>Noter qu'il ne faut pas que la grille soit affichée pour pouvoir double-cliquer sur l'image. Pour masquer la grille : “Options > Masquer la grille”</em>).</p>

<p>Dans le cas contraire&nbsp;:</p>

<ul>
<li>Activer le menu “Outils > Cadrage image...”&nbsp;;</li>
<li>Si l'image n'apparait pas, cliquer le bouton “Chercher toutes les images dans le code”&nbsp;;</li>
<li>Cliquer sur l'aperçu de l'image à recadrer.<br>=> La fenêtre de recadrage s'ouvre.</li>
<li>Utiliser le cadre rouge pour choisir un portion de l'image, celle qui sera visible. On peut le déplacer en cliquant à l'intérieur du cadre rouge puis en glissant la souris et on peut changer sa taille à l'aide du coin en bas à droite&nbsp;;</li>
<li>Cliquer ensuite sur le bouton outil (à droite) correspondant à la commande désirée (puisque plusieurs options sont possibles à ce niveau là, depuis le simple code pour instancier l'image avec ce cadrage jusqu'à la commande pour faire un travelling sur l'image).</li>
</ul>


<p><a name="travelling_image"></a></p>

<h3>Effectuer un travelling dans l'image</h3>

<p>Si le cadrage de l'image le permet (ie si l'image réelle est plus grande que le cadrage qui est fait dedans), on peut exécuter un travelling grâce à la méthode <code>travelling</code> appliquée à l'image créée.</p>

<p>Noter que le “travelling” n'est pas à confondre avec le déplacement de l'image. Dans un déplacement de l'image (cf. <a href="#move_image">Déplacer l'image</a>), l'image  bouge dans le cadre de l'animation, change de position. Dans un “travelling”, l'image reste à la même position dans le cadre de l'animation, c'est son contenu qui se déplace, comme lors d'un travelling de cinéma.</p>

<p>Par exemple&nbsp;:</p>

<pre><code>monImage = IMAGE({&lt;parametres pour définir l'url et le cadrage&gt;})
...
monImage.travelling({&lt;parametres du travelling&gt;})
</code></pre>

<p>Cette méthode attend des paramètres qui vont définir le travelling. Ces paramètres sont&nbsp;:</p>

<pre><code>&lt;image&gt;.travelling({
  x       : {Number} La nouvelle position horizontale du cadrage
  OU
  for_x   : {Number} Le nombre de pixels de déplacement horizontal

  y       : {Number} La nouvelle position verticale du cadrage
  OU
  for_y   : {Number} Le nombre de pixels de déplacement vertical

  width   : {Number} La largeur du nouveau cadre (optionnel)
  height  : {Number} La hauteur du nouveau cadre (optionnel)
  duree : {Number} La durée du travelling en secondes (2 par défaut).
})
</code></pre>

<p>Noter que pour obtenir les nouvelles coordonnées du cadrage, il suffit&nbsp;:</p>

<ul>
<li>d'éditer l'image (en double-cliquant dessus ou en utilisant le menu “Outils > Cadrage image...”)&nbsp;;</li>
<li>De déterminer le cadrage de fin du travelling&nbsp;;</li>
<li>De demander le code (bouton “-> Code” de l'édition)&nbsp;;</li>
<li>De copier-coller le code donné dans le cadre “Paramètres travelling”.</li>
</ul>


<p><a name="modify_source_image"></a></p>

<h3>Modifier la source de l'image</h3>

<p>Plutôt que de détruire une image pour la remplacer par une autre, on peut simplement changer la source de l'image courante.</p>

<p>On modifie la source (ie le fichier de l'image) à l'aide de sa méthode <code>src</code>&nbsp;:</p>

<pre><code>monImage = IMAGE({url:'path/to/image_1.png'})
WAIT(2)
monImage.src('path/to/image_2.png')
</code></pre>

<p><a name="dont_build_image"></a></p>

<h3>Ne pas construire l'image</h3>

<p>Pour ne pas construire l'image lors de son instanciation (par exemple pour pouvoir mettre la liste des images en début de code), ajouter <code>build:false</code> aux paramètres&nbsp;:</p>

<pre><code>monImage = IMAGE({url:'path/to/monimage.png', build:false})
</code></pre>

<p>Puis ensuite, à l'endroit où l'image doit être construite, utiliser :</p>

<pre><code>monImage.build()
</code></pre>

<hr />

<p><a name="les_fleches"></a></p>

<h2>Les flèches</h2>

<h3>Table des matières</h3>

<ul>
<li><a href="#intro_fleches">Introduction aux flèches</a></li>
<li><a href="#associer_fleche_a_objet">Associer une flèche à un objet</a></li>
<li><a href="#definition_arrow">Définition de la flèche (paramètres)</a></li>
<li><a href="#methodes_animation_fleches">Méthodes d'animation des flèches</a></li>
<li><a href="#angle_des_fleches">Angle des flèches</a></li>
<li><a href="#remove_arrow">Détruire la flèche</a></li>
<li><a href="#fleches_independantes">Flèches indépendantes</a></li>
</ul>


<p><a name="intro_fleches"></a></p>

<h3>Introduction</h3>

<p>On peut créer des flèches indépendantes (cf. <a href="#fleches_independantes">Flèches indépendantes</a>) mais le plus judicieux est de les associer à des objets, à commencer par des notes ou des accords.</p>

<p><a name="associer_fleche_a_objet"></a></p>

<h3>Associer des flèches à un objet</h3>

<p>Pour associer une flèche à un objet quelconque (p.e. une note) on utilise la méthode (de l'objet) :</p>

<pre><code>&lt;objet&gt;.arrow([&lt;identifiant fleche&gt;, ]&lt;parameters&gt;)
</code></pre>

<p>Par exemple, pour faire partir une flèche vers le bas depuis une note&nbsp;:</p>

<pre><code>maNote=NOTE(a4)
maNote.arrow({color:red, angle:90})
</code></pre>

<p>… ce qui produira une flèche rouge, partant de la note avec un angle de 90 degré (cf. ci-dessous <a href="#angle_des_fleches">les angles</a>).</p>

<p>On peut créer autant de flèches pour l'objet que l'on veut. Il suffit pour cela d'ajouter un identifiant (sans premier argument comme identifiant, c'est la flèche d'identifiant <code>0</code> qui est prise en compte).</p>

<p>Par exemple&nbsp;:</p>

<pre><code>maNote = NOTE(c4)
maNote.arrow('droite rouge', {color:red, angle:0})
maNote.arrow('bas verte', {color:green, angle:45})
</code></pre>

<p>On fait ensuite référence à ces différentes flèches en faisant référence à leur identifiant&nbsp;:</p>

<pre><code>maNote.arrow('bas verte').rotate(20)
# =&gt; Tourne la flèche 'bas verte' à l'angle 20
maNote.arrow('droite rouge').colorize(blue)
# =&gt; Colore la flèche 'droite rouge' en bleu.
</code></pre>

<p><a name="definition_arrow"></a></p>

<h3>Définition de la flèche</h3>

<p>Lors de la création de la flèche avec la méthode <code>arrow</code> (ou ARROW pour une <a href="#fleches_independantes">flèche indépendante</a>) on peut envoyer ces paramètres optionnels à la méthode&nbsp;:</p>

<pre><code>&lt;objet&gt;.arrow(['&lt;id flèche&gt;',]{
  width     : {Number} longueur fleche en pixels
  angle     : {Number} Angle en degres
  color     : {String} La couleur (constante ou string)
  offset_x  : {Number} Décalage horizontal par rapport à position normale
  offset_y  : {Number} Décalage vertical par rapport à position normale
  top       : {Number} Placement vertical de la fleche (pixels)
  left      : {Number} Placement horizontal de la fleche (pixels)
  height    : {Number} Hauteur de la fleche
})
</code></pre>

<p><strong><code>&lt;objet&gt;</code></strong> est “l'objet porteur” de la flèche, c'est par exemple une note.</p>

<pre><code>maNote = NOTE(a4)
maNote.arrow('fleche vers droite', {angle:0})
</code></pre>

<p><strong><code>&lt;id flèche&gt;</code></strong> est l'identifiant optionnel de la flèche, utile si l'objet porteur doit porter plusieurs flèches.</p>

<p>Les valeurs <strong>top</strong> et <strong>left</strong> sont calculées automatiquement pour que la flèche soit placée correctement suivant l'objet porteur. On peut ajuster ponctuellement la valeur avec <strong>offset_x</strong> et <strong>offset_y</strong>.</p>

<p>L'<strong>angle</strong> est de 0 degré par défaut, c'est-à-dire que la flèche sera horizontale et pointera à droite (pour une autre valeur cf. <a href="#angle_des_fleches">Angle des flèches</a>).</p>

<p>Pour la définition de <strong>color</strong> (la couleur) cf. <a href="#constantes_couleurs">les constantes couleurs</a>.</p>

<p><a name="methodes_animation_fleches"></a></p>

<h3>Méthodes d'animation des flèches</h3>

<ul>
<li><a href="#arrow_rotate">Faire tourner la flèche</a></li>
<li><a href="#method_arrow_size">Changer la taille de la flèche</a></li>
<li><a href="#method_move_arrow">Déplacer la flèche</a></li>
<li><a href="#modifier_color_arrow">Modifier la couleur de la flèche</a></li>
</ul>


<p><a name="arrow_rotate"></a></p>

<h4>Faire tourner la flèche</h4>

<pre><code>&lt;fleche&gt;.rotate(&lt;angle&gt;)
</code></pre>

<p>Par exemple, pour une flèche associée à une note&nbsp;:</p>

<pre><code>maNote=NOTE(c4)
maNote.arrow()
maNote.arrow().rotate(45)
</code></pre>

<p><a name="method_arrow_size"></a></p>

<h4>Changer la taille (longueur) de la flèche</h4>

<pre><code>&lt;fleche&gt;.size(&lt;longueur de la fleche&gt;)
</code></pre>

<p>Par exemple&nbsp;:</p>

<pre><code>maNote=NOTE(b4)
maNote.arrow('growup', {color:bleu})
maNote.arrow('growup').size(100)
</code></pre>

<p>Produira une animation qui fera s'allonger (ou se rétrécir) la flèche de sa longueur actuelle à la longueur <code>100px</code>.</p>

<p>Noter que cette méthode <strong>crée réellement une animation</strong> c'est-à-dire fait varier sous nos yeux la taille de la flèche. Si on veut définir la taille de la flèche au départ, utiliser plutôt le paramètre <code>width</code> dans les paramètres envoyés à la création de la flèche (cf. <a href="#definition_arrow">définition de la flèche</a>).</p>

<p><a name="method_move_arrow"></a></p>

<h4>Déplacer la flèche</h4>

<p>Une flèche se déplace à l'aide de la méthode&nbsp;:</p>

<pre><code>&lt;objet&gt;.&lt;fleche&gt;([&lt;id&gt;]).move(&lt;parameters&gt;)
</code></pre>

<p>… où les paramètres peuvent être&nbsp;:</p>

<pre><code>move({
  x : {Number} Déplacement horizontal (en pixels)
  y : {Number} Déplacement vertical (en pixels)
})
</code></pre>

<p>Par exemple, si une flèche associée à une note doit se déplacer en descendant et en se déplaçant vers la droite&nbsp;:</p>

<pre><code>maNote=NOTE(g4)
maNote.arrow('bouge')
WAIT(2)
maNote.arrow('bouge').move({x:50, y:50}) &lt;--
</code></pre>

<p>Une valeur positives produira toujours un déplacement vers la droite (->) pour <code>x</code> et un déplacement vers le bas pour <code>y</code>, un valeur négative produira un déplacement vers la gauche (&lt;-) pour <code>x</code> et un déplacement vers le haut pour <code>y</code>.</p>

<p><a name="modifier_color_arrow"></a></p>

<h4>Modifier la couleur de la flèche</h4>

<p>Pour modifier la couleur de la flèche, utiliser la méthode <code>colorize</code> :</p>

<pre><code>&lt;objet porteur&gt;.arrow([&lt;id&gt;]).colorize(&lt;couleur&gt;)
</code></pre>

<p>Par exemple&nbsp;:</p>

<pre><code>monAccord = CHORD('c4 e4 g4')
monAccord.arrow({color:green})
# =&gt; Une première flèche verte
monAccord.arrow().colorize(blue)
# =&gt; La colorize en blue
</code></pre>

<p>Pour les constantes couleur utilisable cf. <a href="#constantes_couleurs">les constantes couleurs</a>.</p>

<p><a name="angle_des_fleches"></a></p>

<h3>Angle des flèches</h3>

<p>Repère pour la définition de l'angle d'une flèche&nbsp;:</p>

<pre><code>angle = 0   =&gt; flèche horizontale pointant à droite
angle = 90  =&gt; flèche verticale pointant en bas
angle = -90 =&gt; flèche verticale pointant en haut
angle = 180 =&gt; flèche horizontale pointant à gauche
</code></pre>

<p>Noter que pour les valeurs entre 90 et -90 (donc pointant vers la gauche), il faut modifier le <code>left</code> de la flèche pour qu'elle ne traverse pas la note.</p>

<p><a name="remove_arrow"></a></p>

<h3>Détruire la flèche</h3>

<p>Pour détruire la flèche (la retirer de l'affichage), utiliser sa méthode <code>remove</code>.</p>

<p>Par exemple&nbsp;:</p>

<pre><code>maNote=NOTE(c3)
maNote.arrow()
WAIT(2)
maNote.arrow().remove() &lt;--
</code></pre>

<p><a name="fleches_independantes"></a></p>

<h3>Flèches indépendantes</h3>

<p>[TODO]</p>

<hr />

<p><a name="set_preferences"></a></p>

<h2>Régler les valeurs par défaut</h2>

<p>On peut régler à tout moment (et en particulier au début de l'animation) toutes les valeurs par défaut, particulièrement tout ce qui concerne les positionnements.</p>

<h3>Table des matières</h3>

<ul>
<li><a href="#prefs_speed">Réglage de la vitesse</a></li>
<li><a href="#set_decompte">Réglage du temps de décompte (section “Animation”)</a></li>
<li><a href="#prefs_tips_reglage">Astuce pour le réglage des positions</a></li>
<li><a href="#prefs_staves">Réglage de la position des portées</a></li>
<li><a href="#prefs_x_start">Réglage de la position horizontale initiale (curseur)</a></li>
<li><a href="#prefs_set_next">Réglage de l'avancée à chaque NEXT (curseur)</a></li>
<li><a href="#prefs_position_harmony">Position des textes d'harmonie et de cadence</a></li>
<li><a href="#prefs_position_chord">Position des marques d'accord</a></li>
<li><a href="#prefs_position_modulation">Position de la marque de modulation</a></li>
<li><a href="#prefs_note_size">Taille des notes</a></li>
<li><a href="#prefs_reinitialiser_default">Ré-initialiser toutes les valeurs par défaut</a></li>
</ul>


<p><a name="prefs_speed"></a></p>

<h3>Réglage de la vitesse</h3>

<pre><code>DEFAULT({speed: &lt;coefficiant&gt;})
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT('speed', &lt;coefficiant&gt;)
</code></pre>

<p>… où <code>&lt;coefficiant&gt;</code> est un nombre différent de zéro, qui accélère l'animation s'il est &lt; 1 (p.e. <code>0.5</code>) et qui la ralentit s'il est supérieur à 1 (p.e. <code>5</code>)</p>

<p><strong>Pour remettre les valeurs par défaut</strong></p>

<pre><code>DEFAULT('speed')
</code></pre>

<p><a name="prefs_tips_reglage"></a></p>

<h3>Astuce pour le réglage des positions</h3>

<p>Ci-dessous, on peut découvrir le fonctionnement de la commande <code>DEFAULT</code> pour redéfinir des valeurs de l'animation, et notamment des positionnements d'élément.</p>

<p>Pour pouvoir trouver la valeur-pixel à affecter, le mieux est de procéder ainsi&nbsp;:</p>

<ol>
<li>Trouver dans ce manuel le paramètre à modifier pour obtenir le positionnement recherché.</li>
<li>Une fois ce paramètre déterminé, regarder sa valeur actuelle dans le bloc des infos de l'animation (qui doit se trouver en bas à droite de la page). Au bout d'une ligne commençant par ce paramètre, vous pouvez trouver sa valeur.</li>
<li>Ensuite, déplacer la règle de mesure (en bas à gauche de l'animation — l'animation, pas la page) à l'endroit du changement pour estimer les nouvelles valeurs à donner (50, 100 et 150 sont en pixels).</li>
<li>Régler le paramètre avec la valeur estimée et essayer.</li>
</ol>


<p>Noter qu'on peut aussi, grâce à l'outil “Coordonnées” obtenir les coordonnées exacts des éléments à l'écran (cf. <a href="#outil_coordonnees">Outil “Coordonnées”</a>).</p>

<p><a name="prefs_staves"></a></p>

<h3>Réglage de la position des portées</h3>

<p><strong>Pour régler la position verticale de la première portée&nbsp;:</strong></p>

<pre><code>DEFAULT('staff_top', &lt;nombre de pixels&gt;)
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT({staff_top: &lt;nombre de pixels&gt;})
</code></pre>

<p>Pour remettre la valeur par défaut&nbsp;:</p>

<pre><code>DEFAULT('staff_top')
</code></pre>

<p><em>Noter que si cette valeur est modifiée en cours d'animation (à la volée), cela affectera la position des portées suivantes.</em></p>

<p><strong>Pour régler l'espace vertical entre les portées&nbsp;:</strong></p>

<pre><code>DEFAULT('staff_offset', &lt;nombre de pixels&gt;)
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT({staff_offset: &lt;nombre de pixels&gt;})
</code></pre>

<p>Pour remettre la valeur par défaut&nbsp;:</p>

<pre><code>DEFAULT('staff_offset')
</code></pre>

<p><a name="prefs_x_start"></a></p>

<h3>Réglage de la position horizontale initiale</h3>

<p>Cette position correspond à la position du “curseur”, c'est-à-dire l'endroit où seront marqués les premiers éléments sur la portée (hors clé, armure et métrique).</p>

<pre><code>DEFAULT('x_start', &lt;nombre pixels&gt;)
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT({x_start: &lt;nombre pixels&gt;})
</code></pre>

<p>Pour remettre la valeur par défaut&nbsp;:</p>

<pre><code>DEFAULT('x_start')
</code></pre>

<p>Pour déterminer facilement la valeur, cf. <a href="#prefs_tips_reglage">Astuces pour le réglage des positions</a>.</p>

<p><a name="prefs_set_next"></a></p>

<h3>Réglage de la position <code>next</code></h3>

<p>La position <code>next</code> détermine de combien de pixels le “curseur” se déplacera à droite lorsque la commande <code>NEXT</code> sera utilisée (déterminant la position où seront créés les prochains objets)</p>

<p><strong>Pour la régler de façon absolue</strong></p>

<pre><code>DEFAULT({next: &lt;nombre pixels&gt;})
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT('next', &lt;nombre pixels&gt;)
</code></pre>

<p><strong>Pour la régler de façon relative</strong></p>

<p>(par rapport au <code>next</code> courant)</p>

<pre><code>DEFAULT({offset_next: &lt;nombre de pixels&gt;})
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT('offset_next', &lt;nombre pixels&gt;)
</code></pre>

<p><strong>Pour remettre les valeurs par défaut</strong></p>

<pre><code>DEFAULT('next')
DEFAULT('offset_next')
</code></pre>

<p>Pour déterminer facilement la valeur, cf. <a href="#prefs_tips_reglage">Astuces pour le réglage des positions</a>.</p>

<p><a name="prefs_position_harmony"></a></p>

<h3>Réglage de la position des textes d'harmonie et de cadence</h3>

<p><em>(Pour les marques d'harmonie et de cadence, cf. <a href="#types_speciaux_texte">Types spéciaux de texte</a>)</em></p>

<p><strong>Pour la régler de façon absolue</strong></p>

<pre><code>DEFAULT({harmony: &lt;nombre de pixels&gt;})
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT('harmony', &lt;nombre pixels&gt;)
</code></pre>

<p><strong>Pour la régler de façon relative</strong> (par rapport à décalage courant)</p>

<pre><code>DEFAULT({offset_harmony: &lt;nombre de pixels&gt;})
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT('offset_harmony', &lt;nombre pixels&gt;)
</code></pre>

<p>On peut utiliser aussi la commande spéciale&nbsp;:</p>

<pre><code>OFFSET_HARMONY(&lt;nombre de pixels&gt;)
</code></pre>

<p><strong>Pour remettre les valeurs par défaut</strong></p>

<pre><code>DEFAULT('harmony')
DEFAULT('offset_harmony')
</code></pre>

<p>Pour déterminer facilement la valeur, cf. <a href="#prefs_tips_reglage">Astuces pour le réglage des positions</a>.</p>

<h4>Placement des textes d'harmonie et de cadenece sur une portée précise</h4>

<p>Par défaut, les marques d'harmonie et de cadence se place sous la portée de l'objet qui possède ces textes (l'accord, la note, etc.). On peut cependant forcer l'affichage de ce texte, de façon générale (c'est-à-dire pour tous les textes d'harmonie et de cadence à partir de cette définition) grâce au réglage de&nbsp;:</p>

<pre><code>DEFAULT('staff_harmony', &lt;indice portée&gt;)
</code></pre>

<p>Par exemple, pour que ces textes s'affichent sur la 2e portée, même quand la première portée est active ou que l'objet qui porte le texte se trouve sur la première portée&nbsp;:</p>

<pre><code>DEFAULT('staff_harmony', 2)
</code></pre>

<p>Après cette définition, toutes les marques d'harmonie et de cadence se placeront sous la deuxième portée.</p>

<p>Par rappel, on peut aussi définir cette position au moment de la définition de l'harmonie ou de la cadence grâce à la propriété <code>staff</code> :</p>

<pre><code>monAccord.harmony("V**", {staff:2})
</code></pre>

<p>… mais ça ne modifie la position QUE pour cette marque d'harmonie.</p>

<p><a name="prefs_position_chord"></a></p>

<h3>Réglage de la position des marques d'accord</h3>

<p><em>(Pour les marques d'accords, cf. <a href="#types_speciaux_texte">Types spéciaux de texte</a>)</em></p>

<p><strong>Pour régler la position de façon absolue</strong></p>

<pre><code>DEFAULT({chord: &lt;nombre de pixels&gt;})
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT('chord', &lt;nombre pixels&gt;)
</code></pre>

<p><strong>Pour régler la position de façon relative</strong> (par rapport à décalage courant)</p>

<pre><code>DEFAULT({offset_chord: &lt;nombre de pixels&gt;})
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT('offset_chord', &lt;nombre pixels&gt;)
</code></pre>

<p>On peut utiliser aussi la commande spéciale&nbsp;:</p>

<pre><code>OFFSET_CHORD_MARK(&lt;nombre de pixels&gt;)
</code></pre>

<p><strong>Pour remettre les valeurs par défaut</strong></p>

<pre><code>DEFAULT('chord')
DEFAULT('offset_chord')
</code></pre>

<p>Pour déterminer facilement la valeur, cf. <a href="#prefs_tips_reglage">Astuces pour le réglage des positions</a>.</p>

<p><a name="prefs_position_modulation"></a></p>

<h3>Position de la marque de modulation</h3>

<p>Pour placer la marque de modulation, on peut utiliser pour la position verticale et la position horizontale une valeur absolue ou une valeur relative (relative aux positions actuelles).</p>

<p><strong>Régler la position horizontale absolue</strong></p>

<pre><code>DEFAULT('modulation_x', &lt;nombre de pixels&gt;)
</code></pre>

<p>Ce <code>&lt;nombre de pixels&gt;</code> sera retiré au <code>left</code>, donc si le nombre est positif, la marque recule vers la gauche.</p>

<p>Pour revenir à la position par défaut&nbsp;:</p>

<pre><code>DEFAULT('modulation_x')
</code></pre>

<p>Pour déterminer facilement la valeur, cf. <a href="#prefs_tips_reglage">Astuces pour le réglage des positions</a>.</p>

<p><strong>Régler la position horizontale relative</strong></p>

<p>Pour modifier la position relativement à la position courante&nbsp;:</p>

<pre><code>DEFAULT('offset_modulation_x', &lt;nombre de pixels de decalage&gt;)
</code></pre>

<p><strong>Régler la position verticale absolue</strong></p>

<pre><code>DEFAULT('modulation_y', &lt;pixels par rapport au haut de la portée&gt;)
</code></pre>

<p><strong>Régler la position verticale relative</strong></p>

<pre><code>DEFAULT('offset_modulation_y', &lt;décalage par rapport à la position courante&gt;)
</code></pre>

<p>Un nombre positif baissera la marque, un nombre négative la remontera.</p>

<p><a name="prefs_note_size"></a></p>

<h3>Réglage de la taille des notes</h3>

<p><em>Note&nbsp;: C'est une donnée qu'il vaut mieux ne pas modifier puisqu'elle est calculée automatiquement par rapport à la taille de la portée.</em></p>

<pre><code>DEFAULT('note_size', &lt;hauteur en pixel (flottant)&gt;)
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT({note_size: &lt;hauteur en pixel&gt;})
</code></pre>

<p>Pour remettre la valeur par défaut&nbsp;:</p>

<pre><code>DEFAULT('note_size')
</code></pre>

<p><a name="prefs_reinitialiser_default"></a></p>

<h3>Ré-initialiser toutes les valeurs par défaut</h3>

<p>Pour remettre toutes les valeurs aux valeurs par défaut, utiliser la commande (SANS PARENTHÈSES)&nbsp;:</p>

<pre><code>RESET_PREFERENCES
</code></pre>

<h2>-</h2>

<p><a name="lannexe"></a></p>

<h2>Annexe</h2>

<ul>
<li><a href="#constantes_couleurs">Constantes couleurs</a></li>
</ul>


<p><a name="constantes_couleurs"></a></p>

<h3>Constantes couleurs</h3>

<p>La <strong>color</strong> (couleur) d'un objet quelconque est noire par défaut (une note, une flèche, etc.).</p>

<p>Pour modifier sa couleur, on peut utiliser ces constantes couleur (les valeurs françaises sont des valeurs valides aussi)&nbsp;:</p>

<pre><code>black   noir
red     rouge
blue    bleu
green   vert
grey    gris
orange
</code></pre>
</body>
</html>