<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<style>
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}
* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>
<title>Staff Animation</title>

</head>
<body>
<h1>Staff Animation</h1>

<p>(Animation de portée)</p>

<p>Cette application permet de faire des animations musicales (écrites), à des fins pédagogiques, pour les insérer dans des screencasts.</p>

<ul>
<li><a href="#l_animation">Animation</a></li>
<li><a href="#les_notes">Les notes</a></li>
<li><a href="#les_chords">Les accords</a></li>
<li><a href="#les_staves">Les portées</a></li>
<li><a href="#les_gammes">Les gammes</a></li>
<li><a href="#les_textes">Les textes</a></li>
<li><a href="#les_fleches">Les flèches</a></li>
<li><a href="#set_preferences">Régler toutes les valeurs de l'animation</a></li>
</ul>


<hr />

<p><a name="l_animation"></a></p>

<h2>Création d'une animation</h2>

<h3>Table des matières</h3>

<ul>
<li><a href="#intro_animation">Introduction</a></li>
<li><a href="#code_composition">Composer le code de l'animation</a>

<ul>
<li><a href="#code_comments">Commentaires dans le code</a></li>
<li><a href="#pause_animation">Faire une pause</a></li>
<li><a href="#left_staff">Avancer sur la portée</a></li>
<li><a href="#texte_animation">Écrire un texte général</a></li>
<li><a href="#reset_animation">Resetter l'animation</a></li>
<li><a href="#clean_animation">"Nettoyer" l'animation (tout effacer)</a></li>
</ul>
</li>
<li><a href="#vitesse_animation">Vitesse de l'animation</a></li>
<li><a href="#mode_flash">Activer/désactiver le Mode “Flash</a></li>
<li><a href="#reiniti_preferences">Ré-initialiser toutes les valeurs de préférences</a></li>
</ul>


<h3>Réinitialiser les préférences</h3>

<p><a name="intro_animation"></a></p>

<h3>Introduction</h3>

<p>Une animation est composée de <code>pas</code> (step) qui vont être exécutés l'un après l'autre, produisant des choses aussi diverses que&nbsp;:</p>

<ul>
<li>L'apparitioin d'une portée&nbsp;;</li>
<li>L'écriture d'une note ou d'un accord sur la portée&nbsp;;</li>
<li>Le déplacement de notes&nbsp;;</li>
<li>L'écriture de textes explicatifs&nbsp;;</li>
<li>etc.</li>
</ul>


<p>Chaque pas (chaque “step”) exécute une action. Ces pas se définissent dans la console située à gauche de l'écran (le bloc noir). Chaque pas se trouve sur une ligne distincte. Donc chaque ligne est un nouveau pas, une nouvelle étape de l'animation.</p>

<p><strong>Bien noter que chaque ligne représente un pas, il est impossible de définir plusieurs actions sur la même ligne (en réalité c'est faux, mais c'est dangereux ;-)).</strong></p>

<p>Ces pas peuvent&nbsp;:</p>

<ul>
<li>Construire une portée&nbsp;;</li>
<li>Construire une note (et l'afficher)&nbsp;;</li>
<li>Construire un accord&nbsp;;</li>
<li>Construire une gamme&nbsp;;</li>
<li>Écrire un texte associé à un objet (note, portée, barre, etc.)&nbsp;;</li>
<li>Déplacer un objet quelconque (des notes, des textes, etc.)&nbsp;;</li>
<li>Supprimer une note&nbsp;;</li>
<li>Mettre une note en exergue (entourée d'un cercle de couleur)&nbsp;;</li>
<li>etc.</li>
</ul>


<p><a name="code_composition"></a></p>

<h3>Composer le code de l'animation</h3>

<p><a name="code_comments"></a></p>

<h4>Écrire un commentaire</h4>

<p>Les commentaires s'écrivent avec <code>#</code> en début de ligne.</p>

<p>Noter que les commentaires ne peuvent pas se trouver sur un pas proprement, même après le code. Il faut absolument qu'ils soient sur une ligne seule, qui sera passée.</p>

<p><a name="pause_animation"></a></p>

<h4>Faire une pause dans l'animation.</h4>

<p>On utilise la méthode <code>WAIT</code> pour faire une pause, avec en argument le nombre de secondes (qui peut être un flottant, pour des temps très courts)&nbsp;:</p>

<pre><code>WAIT(&lt;nombre de secondes&gt;)
</code></pre>

<p>Par exemple, pour attendre 4 secondes&nbsp;:</p>

<pre><code>maNote=NOTE(a3)
WAIT(4)                 // 4 secondes avant de construire l'accord
monAccord('c3 eb3 g3')
</code></pre>

<p><em>Note&nbsp;: C'est un “pas” comme les autres, donc il doit être mis sur une ligne seule comme toute étape.</em></p>

<p><a name="left_staff"></a></p>

<h4>Se déplacer sur la portée</h4>

<p>La commande pour écrire à la suite des dernières notes sur la portée, on utilise la commande&nbsp;:</p>

<pre><code>NEXT([&lt;nombre pixels&gt;])
</code></pre>

<p>Par défaut (sans argument), le déplacement sera de 40px (<code>Anim.defaut.hoffset</code>). Sinon, le déplacement sera de la valeur précisée.</p>

<p>Par exemple&nbsp;:</p>

<pre><code>NEXT() 
// =&gt; les notes suivantes s'écriront 40px plus à gauche

NEXT(100)
// =&gt; les notes suivantes s'écriront 100px plus à gauche
</code></pre>

<p><a name="texte_animation"></a></p>

<h4>Écrire un texte général</h4>

<p>Pour écrire un texte en rapport avec l'animation (en haut à gauche), on utilise la méthode <code>WRITE</code>&nbsp;:</p>

<p>WRITE(<le texte à écrire>)</p>

<p>  Par exemple&nbsp;:</p>

<p>  WRITE("Ce qu'il faut remarquer à ce moment-là.")</p>

<p><em>Noter que les objets tels que les notes ont également leur propre méthode textuelle, qui permet d'aligner le textes directement à ces notes, accords, etc.</em></p>

<p><a name="reset_animation"></a></p>

<h4>Reset(-ter) l'animation</h4>

<p>La commande <code>RESET</code> (sans parenthèses ni arguments) permet de repartir de rien en cours d'animation, c'est-à-dire&nbsp;:</p>

<ul>
<li>Effacer tous les objets SAUF les portées et les clés&nbsp;;</li>
<li>Remettre le "curseur" tout à gauche (endroit où seront donc affichés les nouveaux objets).</li>
<li>Remettre toutes les valeurs par défaut.</li>
</ul>


<p>Usage&nbsp;:</p>

<pre><code>RESET
</code></pre>

<p><em>Voir aussi la commande <code>CLEAR</code> ci-dessous qui permet la même chose mais de façon plus ciblée.</em></p>

<p><a name="clean_animation"></a></p>

<h4>Nettoyer l'animation</h4>

<p>“Nettoyer l'animation” signifie supprimer tous les éléments affiché. On peut ou non demander que les portées restent en place, though.</p>

<p>Le pas à utiliser est :</p>

<pre><code>CLEAR(&lt;avec les portées&gt;)
</code></pre>

<p>… <code>&lt;avec les portées&gt;</code> est FALSE par défaut, donc il faut ajouter <code>true</code> pour effacer aussi les portées&nbsp;:</p>

<pre><code>CLEAR(true) // efface aussi les portées
</code></pre>

<p><a name="vitesse_animation"></a></p>

<h3>Vitesse de l'animation</h3>

<p>On peut régler la vitesse de l'animation de façon interactive avec le “slider” se trouvant dans le contrôleur (sous le bouton “Start”).</p>

<p><em>Pour régler la vitesse de façon très fine, cf. aussi <a href="#prefs_speed">Réglage de la vitesse dans les préférences</a>.</em></p>

<p>Mais on peut aussi définir dans le code cette vitesse à l'aide de la commande&nbsp;:</p>

<pre><code>SPEED(&lt;valeur&gt;)
</code></pre>

<p>… avec <code>&lt;valeur&gt;</code> pouvant être un nombre de 0 à 20, <code>10</code> étant la vitesse normale, 0 étant la vitesse la plus lente et 20 la plus rapide.</p>

<p>Pour remettre la vitesse à la vitesse normale&nbsp;:</p>

<pre><code>SPEED() // pas d'argument
</code></pre>

<p><a name="mode_flash"></a></p>

<h3>Activer/désactiver le mode “Flash”</h3>

<p>Le mode “Flash” permet de jouer très rapidement une partie de l'animation. C'est utile lorsqu'une partie est calée, mais qu'on ne veut pas la rejouer systématiquement au même rythme pour atteindre la portion en cours d'élaboration.</p>

<p>Dans ce cas, on met le code à passer entre&nbsp;:</p>

<pre><code>MODE_FLASH
..............
...  code  ...
...   à    ...
... passer ...
..............
STOP_MODE_FLASH
</code></pre>

<p><em>Noter que le résultat ne sera pas du tout le même que si l'on commentait les lignes de code à passer, puisque l'animation ne se trouverait peut-être pas dans le même état.</em></p>

<p><a name="reiniti_preferences"></a></p>

<h3>Ré-initialiser toutes les valeurs de préférence</h3>

<p>Pour remettre toutes les valeurs de décalages aux valeurs de départ, utiliser la commande (SANS PARENTHÈSES)&nbsp;:</p>

<pre><code>RESET_PREFERENCES
</code></pre>

<p><em>Noter que ça ne ré-initialise que les décalages des éléments, tels que les textes de marque de l'harmonie ou des accords, etc. Pour une ré-initialisation complète, utiliser la commande <a href="#reset_animation"><code>RESET</code></a>.</em></p>

<hr />

<p><a name="les_notes"></a></p>

<h2>Les Notes</h2>

<h3>Table des matières</h3>

<ul>
<li><a href="#designation_notes">Désignation des notes</a>

<ul>
<li><a href="#les_alterations">Les altérations</a></li>
</ul>
</li>
<li><a href="#constantes_notes">Constantes notes</a></li>
<li><a href="#creation_note">Créer une note</a></li>
<li><a href="#move_note">Déplacer une note</a></li>
<li><a href="#note_on_staff">Placer une note sur une portée précise</a></li>
<li><a href="#note_exergue_unexergue">Mettre une note en exergue/La sortir de l'exergue</a></li>
<li><a href="#entourer_une_note">Entourer une note (exergue plus forte)</a></li>
<li><a href="#note_remove">Détruire d'une note</a></li>
</ul>


<p><a name="designation_notes"></a></p>

<h3>Désignation des notes</h3>

<p>Les notes doivent être désignées par :</p>

<pre><code>&lt;nom note&gt;&lt;alteration&gt;&lt;octave&gt;
</code></pre>

<ul>
<li>On désigne le <code>nom des notes</code> par une seule lettre, anglaise, de "a" (la) à "g" (sol).</li>
<li>L'altération est soit rien (note naturelle), soit un signe (cf. ci-dessous "b", "d", "x", ou "t").</li>
<li>Vient ensuite l'octave, un nombre, négatif si nécessaire (<em>mais pour le moment, on va seulement jusqu'à l'octave 0, les autres ne sont pas gérés</em>).</li>
</ul>


<p><a name="les_alterations"></a></p>

<h4>Marque des altérations</h4>

<p>La valeur <code>&lt;alteration&gt;</code> ci-dessus peut être :</p>

<ul>
<li><code>b</code> pour bémol</li>
<li><code>t</code> (comme "ton") pour double bémol</li>
<li><code>d</code> pour dièse</li>
<li><code>x</code> pour double-dièse</li>
</ul>


<p><a name="constantes_notes"></a></p>

<h3>Constantes notes</h3>

<p>De l'octave 0 (qui n'existe pas en français) à l'octave 7 il existe des constantes pour chaque note avec l'altération bémol ("b") et dièze ("d").</p>

<p>Les deux formules suivantes sont donc possible :</p>

<pre><code>no=NOTE(ad5)
no=NOTE('ad5')
</code></pre>

<p>Note: Attention à ne pas donner à une variable note le nom d'une de ces constantes. Par exemple, si on fait :</p>

<pre><code>a5=NOTE(a5)
</code></pre>

<p>Cela génèrera une erreur de constante déjà définie.</p>

<p>On peut utiliser plutôt&nbsp;:</p>

<pre><code>na5=NOTE(a5)
</code></pre>

<p><a name="creation_note"></a></p>

<h3>Créer une note</h3>

<pre><code>&lt;variable name&gt; = NOTE(&lt;note&gt;)
</code></pre>

<ul>
<li><code>&lt;variable&gt;</code> peut avoir le nom qu'on veut, HORMIS un nom de constante, comme <code>a5</code>.</li>
<li>La <code>&lt;note&gt;</code> peut être soit un string soit une constante (cf. <a href="#designation_notes">Désignation des notes</a>)</li>
</ul>


<p>On peut aussi, si l'on est certain que la note ne sera pas utilisée après (déplacée, supprimée, mise en exergue, etc.) ne pas l'affecter à une variable et composer immédiatement son aspect.</p>

<p>Par exemple, pour placer une note LA 4 avec une marque de cadence et un accord&nbsp;:</p>

<pre><code>NEW_STAFF(SOL)
NOTE(a4).cadence('V I').chord_mark('A Maj')
</code></pre>

<p><a name="move_note"></a></p>

<h3>Déplacer une note</h3>

<p>Pour déplacer une note, on utilise le pas&nbsp;:</p>

<pre><code>&lt;nom variable note&gt;.moveTo(&lt;nouvelle note&gt;[,&lt;params&gt;])
</code></pre>

<p>Exemple&nbsp;:</p>

<pre><code>maNote=NOTE(a4) // crée la note LA 4
maNote.moveTo(g4) // descend la note vers SOL4
</code></pre>

<p><em>Ne mettre aucune espace dans ce code.</em></p>

<p><em>Noter que la note de destination devra vraiment la nouvelle valeur de la note. Si la note "a4" se déplace vers "a3", cette note deviendra "a3" dans ses données.</em></p>

<p><a name="note_on_staff"></a></p>

<h3>Placer une note sur une portée précise</h3>

<p>Si on veut placer une note sur une portée hors de la portée active, on indique l'indice de cette portée avant la note, puis ":"&nbsp;:</p>

<pre><code>&lt;indice portée&gt;:&lt;note&gt;
</code></pre>

<p>Par exemple&nbsp;:</p>

<pre><code>note_autre_staff=NOTE('2:a4')
OU
note_autre_staff=NOTE('2:'+a4)
</code></pre>

<p>… placera un LA4 sur la deuxième portée, même si elle n'est pas active.</p>

<p><em>Noter que cela ne rend pas la portée active.</em></p>

<p><a name="note_exergue_unexergue"></a></p>

<h3>Mettre une note en exergue (ou la retirer de l'exergue)</h3>

<p>Utiliser la méthode <code>exergue()</code> (pour mettre en exergue, en couleur) et <code>unexergue()</code> (pour la sortir de l'exergue).</p>

<p>Exemple&nbsp;:</p>

<pre><code>maNote=NOTE('cx5')
maNote.exergue()   # =&gt; note en couleur
WAIT(4)
maNote.unexergue()  # =&gt; etat normal
</code></pre>

<p>Cf. aussi <a href="#entourer_une_note">Entourer une note</a> ci-dessous.</p>

<p><a name="entourer_une_note"></a></p>

<h3>Entourer une note</h3>

<p>Pour mettre en exergue une note de façon plus forte que la méthode <a href="#note_exergue_unexergue">exergue</a>, on peut utiliser la méthode <code>surround()</code> qui entoure la note d'un cercle de couleur.</p>

<p>Syntaxe&nbsp;:</p>

<pre><code>&lt;note&gt;.surround([&lt;parameters&gt;])
</code></pre>

<p>… où <code>&lt;note&gt;</code> est une instance de Note, et <code>&lt;parameters&gt;</code> sont les paramètres optionnels envoyés.</p>

<p>Par exemple&nbsp;:</p>

<pre><code>maNote=NOTE(c5)
maNote.surround() # =&gt; entoure d'un cercle rouge

oNote=NOTE(a4)
oNote.surround({color:blue, rectangle:true})
# =&gt; entoure d'un rectangle bleu
</code></pre>

<p>Les paramètres peuvent être&nbsp;:</p>

<dl>
  <dt>color:{String|Constante}</dt>
  <dd>La couleur, parmi 'blue', 'red', 'orange', 'green', 'black' (les valeurs peuvent se définir avec ou sans guillemets).</dd>
  <dt>rectangle:{Boolean}</dt>
  <dd>Si true, un rectangle au lieu d'un rond.</dd>
  <dt>margin:{Number}</dt>
  <dd>Joue sur le diamètre du cercle/rectangle pour laisser plus ou moins de place. Utile lorsque plusieurs notes assez proches sont entourées</dd>
</dl>


<h4>Retirer le cercle</h4>

<p>Deux commandes pour retirer le cercle de la note&nbsp;:</p>

<pre><code>maNote.circle.remove()
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>maNote.unsurround()
</code></pre>

<p><a name="note_remove"></a></p>

<h3>Détruire une note</h3>

<p>Pour détruire la note (la supprimer de l'affichage, utiliser :</p>

<pre><code>&lt;nom variable note&gt;.remove()
</code></pre>

<hr />

<p><a name="les_chords"></a></p>

<h2>Les Accords</h2>

<h3>Table des matières</h3>

<p><em><a href="#chord_creation">Création d'un accord</a>
</em><a href="#chord_ref_note">Référence aux notes de l'accord</a>
*<a href="#chord_remove">Destruction d'un accord</a></p>

<p><a name="chord_creation"></a></p>

<h3>Création d'un accord</h3>

<p>On crée un accord avec :</p>

<pre><code>monAccord=CHORD('&lt;note1&gt; &lt;note2&gt;... &lt;noteN&gt;')
</code></pre>

<p>… où chaque note doit correspondre à la définition normale.</p>

<p>Par exemple&nbsp;:</p>

<pre><code>accDom=CHORD('c3 eb3 g3')
</code></pre>

<h4>Création d'un accord sur plusieurs portées</h4>

<p>On peut poser l'accord sur différentes portées en ajoutant <code>&lt;indice portée&gt;:</code> devant la note (<em>rappel&nbsp;: l'indice portée est "1-start", donc "1" pour la première portée en comptant depuis le haut</em>).</p>

<p>Noter qu'il est inutile d'indiquer l'indice portée de la portée active.</p>

<p>Par exemple (en imaginant que la portée 1 est la portée active)&nbsp;:</p>

<pre><code>acc=CHORD('2:c3 2:g3 e4 g4')
</code></pre>

<p>… placera "c3" et "g3" sur la 2<sup>e</sup> portée (certainement la clé de fa) et les notes "e4" et "g4" sur la 1<sup>ère</sup> portée qui est la portée active.</p>

<p><a name="chord_ref_note"></a></p>

<h3>Référence aux notes de l'accord</h3>

<p>Comme tous les types d'objets possédant plusieurs notes (Accords, Gammes, Motifs), on fait appel aux différentes notes à l'aide de la méthode <code>note</code> appelée sur l'objet :</p>

<pre><code>&lt;nom accord&gt;.note(&lt;indice note&gt;)
</code></pre>

<p>… où <code>&lt;indice note&gt;</code> est l'indice 1-start (1 = première note fournie).</p>

<p>Par exemple&nbsp;:</p>

<pre><code>accDom=CHORD('c3 eb3 g3')
accDom.note(1).moveTo('c4')
// Prends la première note (c3) et la déplace en c4.
</code></pre>

<p>Comme pour tout “groupe de notes”, si l'on veut affecter une note de l'accord à une variable (pour l'utiliser plus facilement ensuite), on ne peut pas procéder ainsi&nbsp;:</p>

<pre><code>maNote=monAccord.note(2)
maNote.write("Une seconde !") # =&gt; # ERREUR #
</code></pre>

<p>Pour ce faire, il faut impérativement utiliser&nbsp;:</p>

<pre><code>maNote=Anim.Objects.monAccord.note(2)
maNote.write("Une seconde !")
</code></pre>

<p>Donc ajouter <code>Anim.Objects</code> devant <code>monAcccord.note(2)</code>, <code>Anim.Objects</code> étant la propriété qui contient tous les objets de l'animation.</p>

<p><a name="chord_remove"></a></p>

<h3>Destruction d'un accord</h3>

<p>Pour détruire l'accord, utiliser&nbsp;:</p>

<pre><code>&lt;nom variable accord&gt;.remove()
</code></pre>

<hr />

<p><a name="les_staves"></a></p>

<h2>Les portées</h2>

<h3>Table des matières</h3>

<ul>
<li><a href="#create_staff">Créer une portée</a></li>
<li><a href="#active_staff">Activer une portée</a></li>
<li><a href="#recuperer_staff">Récupérer une portée</a></li>
<li><a href="#remove_suplines">Supprimer les lignes supplémentaires</a></li>
</ul>


<p><a name="create_staff"></a></p>

<h3>Créer une portée</h3>

<p>Pour créer une portée, utiliser le pas&nbsp;:</p>

<pre><code>NEW_STAFF(&lt;cle&gt;[, &lt;params&gt;])
</code></pre>

<p>… où <code>&lt;cle&gt;</code> peut être <code>SOL</code>, <code>FA</code>, <code>UT3</code>, <code>UT4</code>.</p>

<p>… et <code>&lt;params&gt;</code> peut contenir :</p>

<pre><code>NEW_STAFF(&lt;cle&gt;, {
  offset : decalage supplementaire par rapport à précédente (pixels)
})
</code></pre>

<p><em>Noter que par défaut, il y aura toujours un décalage entre deux portées créées, ce <code>offset</code> ne fait qu'aggrandir l'espacement (s'il est positif) ou le rétrécir (s'il est négatif)</em></p>

<p>Par exemple&nbsp;:</p>

<pre><code>NEW_STAFF(SOL)
</code></pre>

<p>… qui affichera une portée en clé de sol en dessous de la dernière portée.</p>

<p><em>Noter que cette portée deviendra la portée active, c'est-à-dire celle où seront placées les objets définis par la suite.</em></p>

<p><a name="active_staff"></a></p>

<h3>Activer une portée</h3>

<p>Activer une portée signifie que tous les pas suivants la viseront. Par exemple, les notes se déposent toujours sur la portée active.</p>

<pre><code>ACTIVE_STAFF(&lt;indice de la portee&gt;)
</code></pre>

<p>… où <code>&lt;indice de la portee&gt;</code> est son rang dans l'affichage, en partant de 1 et du haut. Donc la portée la plus en haut s'active par&nbsp;:</p>

<pre><code>ACTIVE_STAFF(1)
</code></pre>

<p><a name="recuperer_staff"></a></p>

<h3>Récupérer une portée</h3>

<p>On peut récupérer une portée (pour la “travailler” dessus) à l'aide de la commande&nbsp;:</p>

<pre><code>STAFF(&lt;indice 1-start&gt;)
</code></pre>

<p>Par exemple, pour supprimer la deuxième porée construite&nbsp;:</p>

<pre><code>STAFF(2).remove()
</code></pre>

<p>Noter que pour mettre la portée dans une variable, il faut impérativement utiliser&nbsp;:</p>

<p>maPortee=Anim.Objects.STAFF(x)</p>

<p><a name="remove_suplines"></a></p>

<h3>Supprimer des lignes supplémentaires</h3>

<p>Pour le moment, la suppression de lignes supplémentaires n'est pas automatique, afin de laisser toute liberté à la programmation de l'animation.</p>

<p>Utiliser la commande&nbsp;:</p>

<pre><code>STAFF(&lt;indice 1-start&gt;).remove_suplines({
  top     : &lt;indice ou liste d‘indice a supprimer au-dessus&gt;,
  bottom  : &lt;indice ou liste d‘indices a supprimer en dessous&gt;,
  xoffset : &lt;decalage horizontal&gt;
})
</code></pre>

<ul>
<li>N'utiliser que <code>top</code> et <code>bottom</code> au besoin&nbsp;;</li>
<li>Les indices des lignes se comptent À PARTIR DE LA PORTÉE (donc en montant pour <code>top</code> et en descendant pour <code>bottom</code>)&nbsp;;</li>
<li><code>xoffset</code> n'est à préciser que si les lignes à supprimer ne se trouvent pas sur le décalage horizontal courant (suppression arrière, rare).</li>
</ul>


<h4>Autre commande pour supprimer des lignes supplémentaires</h4>

<p>On détruit ces lignes à l'aide de la commande&nbsp;:</p>

<pre><code>REMOVE_SUPLINE(&lt;parameters&gt;)
</code></pre>

<p>Une ligne supplémentaire est caractéristée par&nbsp;:</p>

<ul>
<li>La portée qui la porte&nbsp;;</li>
<li>Son indice à partir de la portée&nbsp;;</li>
<li>Sa position supérieure ou inférieure&nbsp;;</li>
<li>Son décalage à gauche (“frame” de l'animation).</li>
</ul>


<p>Cela détermine les paramètres de <code>&lt;parameters&gt;</code>.</p>

<pre><code>{
  staff: indice 1-start de la portée (depuis le haut),
  bottom: liste d'indices ou indice de la ligne à supprimer en bas,
  top: liste d'indices ou indice de la ligne à supprimer en haut,
  xoffset: décalage gauche (frame)
}
</code></pre>

<p>Toutes les valeurs à part <code>bottom</code> xou <code>top</code> sont optionnelles&nbsp;:</p>

<p>Si <code>staff</code> n'est pas précisé, on prendra la portée active.</p>

<p>Si <code>xoffset</code> n'est pas précisé, on prendra le décalage courant (ce qui représente le cas le plus fréquent, entendu qu'on va rarement supprimer une ligne supplémentaire "en arrière").</p>

<p><em>Note&nbsp;: lors d'un déplacement, une suppression ou tout autre effet qui doit rendre obsolète la ligne supplémentaire, il est préférable de déclencher la suppression des lignes supplémentaires AVANT la commande sur la note. Par exemple, pour un déplacement&nbsp;:</em></p>

<pre><code>note=NOTE(c4) // ajoute une ligne supplément en bas
WAIT(2)
REMOVE_SUPLINE({bottom:1})
note.moveTo(c5)
</code></pre>

<h4>Précision des indices</h4>

<p>Les indices peuvent être une simple valeur numérique&nbsp;:</p>

<pre><code>bottom:1 / top:1
</code></pre>

<p>… ou une liste d'indices</p>

<pre><code>top:[1,2] / bottom:[1,2]
</code></pre>

<p>Noter que ces indices sont "1-start" et se comptent toujours À PARTIR DE LA portée, donc en descendant pour <code>bottom</code> et en montant pour <code>top</code>.</p>

<p>Noter aussi que <code>bottom</code> et <code>top</code> sont complètement indépendants, pour <code>bottom</code> on ne tient compte QUE des lignes supplémentaires inférieures et pour <code>top</code> on ne tient compte QUE des lignes supplémentaires supérieures.</p>

<hr />

<p><a name="les_gammes"></a></p>

<h2>Les gammes</h2>

<h3>Table des matières</h3>

<ul>
<li><a href="#introduction_gammes">Introduction</a></li>
<li><a href="#parametres_gammes">Paramètres de définition des gammes</a></li>
<li><a href="#utilisation_notes_gammes">Utilisation des notes de la gammes</a></li>
</ul>


<p><a name="introduction_gammes"></p>

<h3>Introduction</h3>

<p>On peut produire en un seul pas une gamme à l'aide de la commande :</p>

<pre><code>&lt;var&gt;=SCALE(&lt;tonalité&gt;[, &lt;paramters&gt;])
</code></pre>

<ul>
<li><code>&lt;var&gt;</code> est un nom de variable quelconque</li>
<li><code>&lt;tonalité&gt;</code> est la tonalité exprimée par une seule lettre (anglaise) de "a" (la) à "g" (sol). On peut ajouter toutes les altérations voulues (cf. <a href="#les_alterations">Les altérations</a>). Noter que par défaut, suivant la portée active, l'animation affiche ses notes à la hauteur où elles produiront le moins de lignes supplémentaires.</li>
<li><code>&lt;parameters&gt;</code> est une liste de paramètres optionnels. Cf. ci-dessous.</li>
</ul>


<p><a name="parametres_gammes"></a></p>

<h3>Paramètres de définition des gammes</h3>

<p>Ils constituent le second argument de la commande <code>SCALE</code>, après la note de la tonalité.</p>

<p>C'est un objet de propriétés&nbsp;:</p>

<pre><code>maGamme=SCALE('a',{
  octave : 2,
  for    : 5,
  etc.
})
</code></pre>

<h4>Liste des propriétés</h4>

<dl>
  <dt>type : {String}</dt>
  <dd>Le type de gamme, parmi : 'MAJ' : Gamme majeure (défaut), 'min_h' : Mineure harmonique, 'min_ma' : MINeure Mélodique Ascendante, 'min_md' : MINeure Mélodique Descendante.
  </dd>
  <dt>octave : {Number}</dt>
  <dd>L'octave à laquelle il faut affiche la gamme. Par défaut, celui qui produira le moins de ligne supplémentaires, donc celui dont le plus grand nombre de notes se trouve *dans* la portée.
  </dd>
  <dt>staff : {Number}</dt>
  <dd>L'indice de la portée sur laquelle il faut écrire la gamme. Par défaut, la portée active.</dd>
  <dt>offset : {Number}</dt>
  <dd>Le décalage horizontal pour commencer la gamme. Par défaut le décalage courant (la position du “pointeur”).</dd>
  <dt>asc : {Boolean}</dt>
  <dd>Si TRUE (défaut), la gamme sera ascendante, sinon, elle descendra.</dd>
  <dt>for : {Number}</dt>
  <dd>Le nombre de notes de la gamme à afficher. Par défaut, 8 pour pouvoir les afficher toutes, de la tonique à la tonique.</dd>
  <dt>from : {Number}</dt>
  <dd>La première note de la gamme de laquelle partir (1-start)</dd>
</dl>


<p><a name="utilisation_notes_gammes"></a></p>

<h3>Utilisation des notes de la gamme</h3>

<p>Comme pour tout “groupe de notes” (accord, motif, etc.) les notes de la gamme peuvent être ensuite traitées séparément grâce à la méthode <code>note</code> appelé sur l'objet (ici appelée sur la gamme)</p>

<p>Soit une gamme&nbsp;:</p>

<pre><code>maGamme=SCALE('d')
</code></pre>

<p>On récupère ses notes par&nbsp;:</p>

<pre><code>maGamme.note(&lt;indice note&gt;)
</code></pre>

<p>Cet <code>indice</code> est “1-start”, c'est-à-dire que la première note porte l'indice 1, la seconde note porte l'indice 2, etc.</p>

<p>Par exemple, si je veux poser un texte sur la deuxième note&nbsp;:</p>

<pre><code>maGamme.note(2).write("Une seconde !")
</code></pre>

<p>Comme pour tout “groupe de notes”, si l'on veut mettre un élément (note) du groupe dans une variable, ce code n'est pas possible&nbsp;:</p>

<pre><code>maNote=maGamme.note(2)
maNote.write("Une seconde !") # =&gt; # ERREUR #
</code></pre>

<p>Pour ce faire, il faut impérativement utiliser&nbsp;:</p>

<pre><code>maNote=Anim.Objects.maGamme.note(2)
maNote.write("Une seconde !")
</code></pre>

<hr />

<p><a name="les_textes"></a></p>

<h2>Les Textes</h2>

<h3>Table des matières</h3>

<ul>
<li><a href="#intro_textes">Introduction aux textes</a></li>
<li><a href="#create_texte">Créer un texte</a>

<ul>
<li><a href="#types_speciaux_texte">Types spéciaux de texte (accord, harmonie, etc.)</a></li>
<li><a href="#create_texte_animation">Créer un texte pour l'animation</a></li>
<li><a href="#create_texte_objet">Créer un texte pour un objet</a></li>
</ul>
</li>
<li><a href="#supprimer_texte">Supprimer un texte</a>

<ul>
<li><a href="#supprimer_texte_objet">Supprimer le texte d'un objet</a></li>
</ul>
</li>
<li><a href="#set_preferences">Définir les positions des textes</a></li>
</ul>


<p><a name="intro_textes"></a></p>

<h3>Introduction</h3>

<p>Les textes peuvent exister pour l'animation en général (ils sont alors écrits en haut à gauche et chaque nouveau texte remplace l'ancien), mais ils peuvent être associés aussi à tout objet de l'animation, note, portée, mesure, barre, etc.</p>

<p><a name="create_texte"></a></p>

<h3>Créer un texte</h3>

<p><a name="types_speciaux_texte"></a></p>

<h4>Types spéciaux de texte</h4>

<p>Par défaut, un texte est "normal", il s'écrit tel qu'il est défini.</p>

<p>Mais il existe des types qui peuvent être définis grâce à la propriété <code>type</code> envoyée en paramètres&nbsp;:</p>

<dl>
  <dt>harmony</dt>
  <dd>Écrit le texte sous la portée, sous forme d'une marque d'harmonie.<br>Si le texte se finit par un certain nombre de "*" ou de "•", ils sont considérés comme des renversements de l'accord et traités visuellement comme tels.</dd>
  <dt>cadence</dt>
  <dd>Écrit le texte sous la portée, à la position courante, sous forme de marque cadentielle (donc avec des traits "__|" pour marquer la fin de la partie).</dd>
  <dt>chord</dt>
  <dd>Le type `chord` permet d'écrire un accord au-dessus de l'élément porteur du texte. Il est stylisé en conséquence.</dd>
</dl>


<p>Pour indiquer une <strong>HAMRONIE</strong>&nbsp;:</p>

<p>Par exemple, pour indiquer que l'accord est un premier degré sous son deuxième renversement&nbsp;:</p>

<pre><code>monAccord=CHORD('g4 c5 e5')
monAccord.write("I**",{type:harmony})
</code></pre>

<p>Il existe aussi le raccourci&nbsp;:</p>

<pre><code>monAccord.harmony("I**")
</code></pre>

<p><em>Pour le positionnement de la marque, cf. <a href="#prefs_position_harmony">Position des textes d'harmonie et de cadence</a>.</em></p>

<p>Noter que pour allonger la barre inférieur de la marque d'harmonie, on peut ajouter le paramètre <code>width</code> qui sera le nombre de pixels désiré. Par exemple&nbsp;:</p>

<pre><code>monAccord.write("I**", {type:harmony, width:100})
OU
monAccord.harmony("I**", {width:100})
</code></pre>

<p>Pour indiquer une <strong>CADENCE</strong>&nbsp;:</p>

<pre><code>monAccord.write("I", {type:cadence})
OU
monAccord.cadence("I")
</code></pre>

<p><em>Pour le positionnement de la marque, cf. <a href="#prefs_position_harmony">Position des textes d'harmonie et de cadence</a>.</em></p>

<p>Pour indiquer le <strong>NOM DE L'ACCORD</strong> au-dessus des notes&nbsp;:</p>

<pre><code>monAccord.write("C", {type:chord})
</code></pre>

<p>… ou le raccourci <code>chord_mark</code>&nbsp;:</p>

<pre><code>monAccord.chord_mark("C")
</code></pre>

<p><em>Pour le positionnement de la marque de l'accord cf. <a href="#prefs_position_chord_mark">Réglage de la position de l'accord</a>.</em></p>

<p><a name="create_texte_animation"></a></p>

<h4>Créer un texte pour l'animation</h4>

<p>Utiliser la commande&nbsp;:</p>

<pre><code>WRITE("&lt;le texte&gt;")
</code></pre>

<p><a name="create_texte_objet"></a></p>

<h4>Créer un texte pour un objet</h4>

<p>Pour associer un texte à un objet, il faut bien sûr créer l'objet puis ensuite appeler sa méthode <code>write</code> (écrire)&nbsp;:</p>

<pre><code>maNote=NOTE(a4)
maNote.write("C'est un LA 4")
</code></pre>

<p><a name="supprimer_texte"></a></p>

<h3>Supprimer un texte</h3>

<p><a name="supprimer_texte_objet"></a></p>

<h4>Supprimer un texte d'objet</h4>

<p>Pour supprimer le texte de l'objet, c'est-à-dire de le faire disparaitre de l'affichage, utiliser la méthode <code>hide</code> (cacher) du texte de l'objet&nbsp;:</p>

<pre><code>&lt;note&gt;.texte.hide()
</code></pre>

<p>Par exemple&nbsp;:</p>

<pre><code>maNote=NOTE(a4)
# Écrire le texte
maNote.write("C'est un LA 4")
# Attendre 2 secondes
WAIT(2)
# Supprimer le texte
maNote.texte.hide()
</code></pre>

<p>Noter que cette méthode supprime l'affichage du texte, mais l'objet <code>texte</code> existe toujours pour l'objet et on peut le ré-utiliser plus tard, par exemple avec&nbsp;:</p>

<pre><code>maNote.texte.show()
</code></pre>

<p>… qui ré-affichera ce texte.</p>

<hr />

<p><a name="les_fleches"></a></p>

<h2>Les flèches</h2>

<h3>Table des matières</h3>

<ul>
<li><a href="#intro_fleches">Introduction aux flèches</a></li>
<li><a href="#associer_fleche_a_objet">Associer une flèche à un objet</a></li>
<li><a href="#definition_arrow">Définition de la flèche (paramètres)</a></li>
<li><a href="#methodes_animation_fleches">Méthodes d'animation des flèches</a></li>
<li><a href="#angle_des_fleches">Angle des flèches</a></li>
<li><a href="#remove_arrow">Détruire la flèche</a></li>
<li><a href="#fleches_independantes">Flèches indépendantes</a></li>
</ul>


<p><a name="intro_fleches"></a></p>

<h3>Introduction</h3>

<p>On peut créer des flèches indépendantes (cf. <a href="#fleches_independantes">Flèches indépendantes</a>) mais le plus judicieux est de les associer à des objets, à commencer par des notes.</p>

<p><a name="associer_fleche_a_objet"></a></p>

<h3>Associer une flèche à un objet</h3>

<p>Pour associer une flèche à un objet quelconque (p.e. une note) on utilise la méthode (de l'objet) :</p>

<pre><code>arrow(&lt;parameters&gt;)
</code></pre>

<p>Par exemple, pour faire partir une flèche d'une note&nbsp;:</p>

<pre><code>maNote=NOTE(a4)
maNote.arrow({color:red, angle:90})
</code></pre>

<p>… ce qui produira une flèche rouge, partant de la note avec un angle de 90 degré (cf. ci-dessous <a href="#angle_des_fleches">les angles</a>).</p>

<p><a name="definition_arrow"></a></p>

<h3>Définition de la flèche</h3>

<p>Lors de la création de la flèche avec la méthode <code>arrow</code> (ou ARROW pour une <a href="#fleches_independantes">flèche indépendante</a>) on peut envoyer ces paramètres optionnels à la méthode&nbsp;:</p>

<pre><code>maNote.arrow({
  width:  {Number} longueur fleche en pixels
  angle:  {Number} Angle en degres
  color:  {String} La couleur (constante ou string)
  top:    {Number} Placement vertical de la fleche (pixels)
  left:   {Number} Placement horizontal de la fleche (pixels)
  height: {Number} Hauteur de la fleche
})
</code></pre>

<p>Les valeurs <strong>top</strong> et <strong>left</strong> sont calculées automatiquement pour que la flèche soit placée correctement à droite de l'objet.</p>

<p>L'<strong>angle</strong> est de 0 degré par défaut, c'est-à-dire que la flèche sera horizontale et pointera à droite (pour une autre valeur cf. <a href="#angle_des_fleches">Angle des flèches</a>).</p>

<p>La <strong>color</strong> (couleur) est noire par défaut. On peut utiliser toutes les constantes de couleur pré-définies, c'est-à-dire (les valeurs françaises sont des valeurs valides aussi)&nbsp;:</p>

<pre><code>black   noir
red     rouge
blue    bleu
green   vert
orange
</code></pre>

<p><a name="methodes_animation_fleches"></a></p>

<h3>Méthodes d'animation des flèches</h3>

<ul>
<li><a href="#arrow_rotate">Faire tourner la flèche</a></li>
<li><a href="#method_arrow_size">Changer la taille de la flèche</a></li>
<li><a href="#method_move_arrow">Déplacer la flèche</a></li>
</ul>


<p><a name="arrow_rotate"></a></p>

<h4>Faire tourner la flèche</h4>

<pre><code>&lt;fleche&gt;.rotate(&lt;angle&gt;)
</code></pre>

<p>Par exemple, pour une flèche associée à une note&nbsp;:</p>

<pre><code>maNote=NOTE(c4)
maNote.arrow()
maNote.arrow.rotate(45)
</code></pre>

<p><a name="method_arrow_size"></a></p>

<h4>Changer la taille (longueur) de la flèche</h4>

<pre><code>&lt;fleche&gt;.size(&lt;longueur de la fleche&gt;)
</code></pre>

<p>Par exemple&nbsp;:</p>

<pre><code>maNote=NOTE(b4)
maNote.arrow({color:bleu})
maNote.arrow.size(100)
</code></pre>

<p>Produira une animation qui fera s'allonger la flèche de sa longueur actuelle à la longueur <code>100px</code>.</p>

<p>Noter que cette méthode <strong>crée réellement une animation</strong> c'est-à-dire fait varier sous nos yeux la taille de la flèche. Si on veut définir la taille de la flèche au départ, utiliser plutôt le paramètre <code>width</code> dans les paramètres envoyés à la création de la flèche (cf. <a href="#definition_arrow">définition de la flèche</a>).</p>

<p><a name="method_move_arrow"></a></p>

<h4>Déplacer la flèche</h4>

<p>Une flèche se déplace à l'aide de la méthode&nbsp;:</p>

<pre><code>&lt;fleche&gt;.move(&lt;parameters&gt;)
</code></pre>

<p>… où les paramètres peuvent être&nbsp;:</p>

<pre><code>move({
  x : {Number} Déplacement horizontal (en pixels)
  y : {Number} Déplacement vertical (en pixels)
})
</code></pre>

<p>Par exemple, si une flèche associée à une note doit se déplacer en descendant et en se déplaçant vers la droite&nbsp;:</p>

<pre><code>maNote=NOTE(g4)
maNote.arrow()
WAIT(2)
maNote.arrow.move({x:50, y:50}) &lt;--
</code></pre>

<p>Une valeur positives produira toujours un déplacement vers la droite (->) pour <code>x</code> et un déplacement vers le bas pour <code>y</code>, un valeur négative produira un déplacement vers la gauche (&lt;-) pour <code>x</code> et un déplacement vers le haut pour <code>y</code>.</p>

<p><a name="angle_des_fleches"></a></p>

<h3>Angle des flèches</h3>

<p>Repère pour la définition de l'angle d'une flèche&nbsp;:</p>

<pre><code>angle = 0   =&gt; flèche horizontale pointant à droite
angle = 90  =&gt; flèche verticale pointant en bas
angle = -90 =&gt; flèche verticale pointant en haut
angle = 180 =&gt; flèche horizontale pointant à gauche
</code></pre>

<p>Noter que pour les valeurs entre 90 et -90 (donc pointant vers la gauche), il faut modifier le <code>left</code> de la flèche pour qu'elle ne traverse pas la note.</p>

<p><a name="remove_arrow"></a></p>

<h3>Détruire la flèche</h3>

<p>Pour détruire la flèche (la retirer de l'affichage), utiliser sa méthode <code>remove</code>.</p>

<p>Par exemple&nbsp;:</p>

<pre><code>maNote=NOTE(c3)
maNote.arrow()
WAIT(2)
maNote.arrow.remove() &lt;--
</code></pre>

<p><a name="fleches_independantes"></a></p>

<h3>Flèches indépendantes</h3>

<p>[TODO]</p>

<hr />

<p><a name="set_preferences"></a></p>

<h2>Régler les valeurs par défaut</h2>

<p>On peut régler à tout moment (et en particulier au début de l'animation) toutes les valeurs par défaut, particulièrement tout ce qui concerne les positionnements.</p>

<h3>Table des matières</h3>

<ul>
<li><a href="#prefs_speed">Réglage de la vitesse</a></li>
<li><a href="#prefs_set_next">Réglage de l'avancée à chaque NEXT (curseur)</a></li>
<li><a href="#prefs_position_harmony">Position des textes d'harmonie et de cadence</a></li>
<li><a href="#prefs_position_chord_mark">Position des marques d'accord</a></li>
<li><a href="#prefs_reinitialiser_default">Ré-initialiser toutes les valeurs par défaut</a></li>
</ul>


<p><a name="prefs_speed"></a></p>

<h3>Réglage de la vitesse</h3>

<pre><code>DEFAULT({speed: &lt;coefficiant&gt;})
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT('speed', &lt;coefficiant&gt;)
</code></pre>

<p>… où <code>&lt;coefficiant&gt;</code> est un nombre différent de zéro, qui accélère l'animation s'il est &lt; 1 (p.e. <code>0.5</code>) et qui la ralentit s'il est supérieur à 1 (p.e. <code>5</code>)</p>

<p><a name="prefs_set_next"></a></p>

<h3>Réglage de la position <code>next</code></h3>

<p>La position <code>next</code> détermine de combien de pixels le “curseur” se déplacera à droite lorsque la commande <code>NEXT</code> sera utilisée (déterminant la position où seront créés les prochains objets)</p>

<p><strong>Pour la régler de façon absolue</strong></p>

<pre><code>DEFAULT({next: &lt;nombre pixels&gt;})
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT('next', &lt;nombre pixels&gt;)
</code></pre>

<p><strong>Pour la régler de façon relative</strong></p>

<p>(par rapport au <code>next</code> courant)</p>

<pre><code>DEFAULT({offset_next: &lt;nombre de pixels&gt;})
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT('offset_next', &lt;nombre pixels&gt;)
</code></pre>

<p><a name="prefs_position_harmony"></a></p>

<h3>Réglage de la position des textes d'harmonie et de cadence</h3>

<p><em>(Pour les marques d'harmonie et de cadence, cf. <a href="#types_speciaux_texte">Types spéciaux de texte</a>)</em></p>

<p><strong>Pour la régler de façon absolue</strong></p>

<pre><code>DEFAULT({harmony: &lt;nombre de pixels&gt;})
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT('harmony', &lt;nombre pixels&gt;)
</code></pre>

<p><strong>Pour la régler de façon relative</strong> (par rapport à décalage courant)</p>

<pre><code>DEFAULT({offset_harmony: &lt;nombre de pixels&gt;})
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT('offset_harmony', &lt;nombre pixels&gt;)
</code></pre>

<p>On peut utiliser aussi la commande spéciale&nbsp;:</p>

<pre><code>OFFSET_HARMONY(&lt;nombre de pixels&gt;)
</code></pre>

<p><a name="prefs_position_chord_mark"></a></p>

<h3>Réglage de la position des marques d'accord</h3>

<p><em>(Pour les marques d'accords, cf. <a href="#types_speciaux_texte">Types spéciaux de texte</a>)</em></p>

<p><strong>Pour régler la position de façon absolue</strong></p>

<pre><code>DEFAULT({chord_mark: &lt;nombre de pixels&gt;})
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT('chord_mark', &lt;nombre pixels&gt;)
</code></pre>

<p><strong>Pour régler la position de façon relative</strong> (par rapport à décalage courant)</p>

<pre><code>DEFAULT({offset_chord_mark: &lt;nombre de pixels&gt;})
</code></pre>

<p>Ou&nbsp;:</p>

<pre><code>DEFAULT('offset_chord_mark', &lt;nombre pixels&gt;)
</code></pre>

<p>On peut utiliser aussi la commande spéciale&nbsp;:</p>

<pre><code>OFFSET_CHORD_MARK(&lt;nombre de pixels&gt;)
</code></pre>

<p><a name="prefs_reinitialiser_default"></a></p>

<h3>Ré-initialiser toutes les valeurs par défaut</h3>

<p>Pour remettre toutes les valeurs aux valeurs par défaut, utiliser la commande (SANS PARENTHÈSES)&nbsp;:</p>

<pre><code>RESET_PREFERENCES
</code></pre>

<p>-</p>
</body>
</html>